import{S as t,i as e,s,ae as a,e as n,k as r,c as o,a as i,n as c,d as l,b as u,f as h,H as f,x as g,r as m,u as x,v as d,w as p,j as v,o as w,t as $,g as y,I as b,h as S,af as O,ag as j,ah as D,K as k,L as I,ad as U,a0 as N,ai as E,m as J,aj as z,ak as T,l as B,al as M,D as V,am as C,an as L,ao as X,ap as q,aq as A,ar as F,as as Y,at as _,au as H,W as P,av as K}from"./vendor-c6674e75.js";import{r as R}from"./singletons-12a22614.js";import{l as W}from"./locale-43eac5b3.js";const G=R,Q=async function(t,e){return G.goto(t,e,[])};function Z(t,e,s){const a=t.slice();return a[1]=e[s],a}function tt(t){let e,s,a;var r=t[1].icon;return r&&(s=new r({})),{c(){e=n("div"),s&&v(s.$$.fragment),this.h()},l(t){e=o(t,"DIV",{class:!0});var a=i(e);s&&J(s.$$.fragment,a),a.forEach(l),this.h()},h(){u(e,"class","message-icon svelte-v1icgi")},m(t,n){h(t,e,n),s&&w(s,e,null),a=!0},p(t,a){if(r!==(r=t[1].icon)){if(s){m();const t=s;x(t.$$.fragment,1,0,(()=>{d(t,1)})),p()}r?(s=new r({}),v(s.$$.fragment),g(s.$$.fragment,1),w(s,e,null)):s=null}},i(t){a||(s&&g(s.$$.fragment,t),a=!0)},o(t){s&&x(s.$$.fragment,t),a=!1},d(t){t&&l(e),s&&d(s)}}}function et(t){let e,s=t[1].text+"";return{c(){e=$(s)},l(t){e=y(t,s)},m(t,s){h(t,e,s)},p(t,a){1&a&&s!==(s=t[1].text+"")&&S(e,s)},d(t){t&&l(e)}}}function st(t){let e,s,a=t[1].html+"";return{c(){e=new T,s=B(),this.h()},l(t){e=M(t),s=B(),this.h()},h(){e.a=s},m(t,n){e.m(a,t,n),h(t,s,n)},p(t,s){1&s&&a!==(a=t[1].html+"")&&e.p(a)},d(t){t&&l(s),t&&e.d()}}}function at(t){let e,s,a,r,c,g=t[1].action.text+"";function m(...e){return t[11](t[1],...e)}return{c(){e=n("div"),s=n("button"),a=$(g),this.h()},l(t){e=o(t,"DIV",{class:!0});var n=i(e);s=o(n,"BUTTON",{class:!0});var r=i(s);a=y(r,g),r.forEach(l),n.forEach(l),this.h()},h(){u(s,"class","btn-light"),u(e,"class","message-action svelte-v1icgi")},m(t,n){h(t,e,n),f(e,s),f(s,a),r||(c=b(s,"click",m),r=!0)},p(e,s){t=e,1&s&&g!==(g=t[1].action.text+"")&&S(a,g)},d(t){t&&l(e),r=!1,c()}}}function nt(t,e){let s,a,d,v,w,$,y,b,S,N,E=V,J=e[1].icon&&tt(e);function T(t,e){return null!=t[1].html?st:et}let B=T(e),M=B(e),C=e[1].action&&at(e);return{key:t,first:null,c(){s=n("div"),J&&J.c(),a=r(),d=n("div"),M.c(),w=r(),C&&C.c(),$=r(),this.h()},l(t){s=o(t,"DIV",{class:!0});var e=i(s);J&&J.l(e),a=c(e),d=o(e,"DIV",{class:!0});var n=i(d);M.l(n),n.forEach(l),w=c(e),C&&C.l(e),$=c(e),e.forEach(l),this.h()},h(){u(d,"class",v="message-content "+(null!=e[1].html?"html":"text")+" svelte-v1icgi"),u(s,"class",y="message "+e[1].variant+" svelte-v1icgi"),this.first=s},m(t,e){h(t,s,e),J&&J.m(s,null),f(s,a),f(s,d),M.m(d,null),f(s,w),C&&C.m(s,null),f(s,$),N=!0},p(t,n){(e=t)[1].icon?J?(J.p(e,n),1&n&&g(J,1)):(J=tt(e),J.c(),g(J,1),J.m(s,a)):J&&(m(),x(J,1,1,(()=>{J=null})),p()),B===(B=T(e))&&M?M.p(e,n):(M.d(1),M=B(e),M&&(M.c(),M.m(d,null))),(!N||1&n&&v!==(v="message-content "+(null!=e[1].html?"html":"text")+" svelte-v1icgi"))&&u(d,"class",v),e[1].action?C?C.p(e,n):(C=at(e),C.c(),C.m(s,$)):C&&(C.d(1),C=null),(!N||1&n&&y!==(y="message "+e[1].variant+" svelte-v1icgi"))&&u(s,"class",y)},r(){S=s.getBoundingClientRect()},f(){O(s),E(),j(s,S)},a(){E(),E=D(s,S,z,{duration:200})},i(t){N||(g(J),k((()=>{b||(b=I(s,U,{x:-200,duration:250},!0)),b.run(1)})),N=!0)},o(t){x(J),b||(b=I(s,U,{x:-200,duration:250},!1)),b.run(0),N=!1},d(t){t&&l(s),J&&J.d(),M.d(),C&&C.d(),t&&b&&b.end()}}}function rt(t){let e,s,a=[],r=new Map,c=t[0];const f=t=>t[1];for(let n=0;n<c.length;n+=1){let e=Z(t,c,n),s=f(e);r.set(s,a[n]=nt(s,e))}return{c(){e=n("div");for(let t=0;t<a.length;t+=1)a[t].c();this.h()},l(t){e=o(t,"DIV",{class:!0});var s=i(e);for(let e=0;e<a.length;e+=1)a[e].l(s);s.forEach(l),this.h()},h(){u(e,"class","messenger svelte-v1icgi")},m(t,n){h(t,e,n);for(let s=0;s<a.length;s+=1)a[s].m(e,null);s=!0},p(t,[s]){if(1&s){c=t[0],m();for(let t=0;t<a.length;t+=1)a[t].r();a=N(a,s,f,1,t,c,r,e,E,nt,null,Z);for(let t=0;t<a.length;t+=1)a[t].a();p()}},i(t){if(!s){for(let t=0;t<c.length;t+=1)g(a[t]);s=!0}},o(t){for(let e=0;e<a.length;e+=1)x(a[e]);s=!1},d(t){t&&l(e);for(let e=0;e<a.length;e+=1)a[e].d()}}}function ot(t,e,s){const a={success:C,error:L,info:X,warning:q};let{messages:n=[]}=e,{maxStack:r=3}=e,{duration:o=3e3}=e;const i=t=>{let e={variant:t.variant||"normal",text:t.text,html:t.html,icon:t.icon||(t.variant&&"normal"!==t.variant?a[t.variant]:null),persist:!!t.persist,duration:t.duration||o};s(0,n=[...n,e]),e.persist||setTimeout((()=>c(e)),e.duration),n.length>r&&s(0,n=n.slice(1))},c=t=>{s(0,n=n.filter((e=>e!=t)))};return t.$$set=t=>{"messages"in t&&s(0,n=t.messages),"maxStack"in t&&s(2,r=t.maxStack),"duration"in t&&s(3,o=t.duration)},[n,(t,e={})=>i(Object.assign({variant:"normal",text:t},e)),r,o,i,c,()=>{s(0,n=[])},(t,e={})=>i(Object.assign({variant:"success",text:t},e)),(t,e={})=>i(Object.assign({variant:"info",text:t},e)),(t,e={})=>i(Object.assign({variant:"warning",text:t},e)),(t,e={})=>i(Object.assign({variant:"error",text:t},e)),(t,e)=>t.action&&t.action.fn(e)]}class it extends t{constructor(t){super(),e(this,t,ot,rt,s,{messages:0,maxStack:2,duration:3,add:4,remove:5,clear:6,message:1,success:7,info:8,warn:9,error:10})}get messages(){return this.$$.ctx[0]}set messages(t){this.$$set({messages:t}),a()}get maxStack(){return this.$$.ctx[2]}set maxStack(t){this.$$set({maxStack:t}),a()}get duration(){return this.$$.ctx[3]}set duration(t){this.$$set({duration:t}),a()}get add(){return this.$$.ctx[4]}get remove(){return this.$$.ctx[5]}get clear(){return this.$$.ctx[6]}get message(){return this.$$.ctx[1]}get success(){return this.$$.ctx[7]}get info(){return this.$$.ctx[8]}get warn(){return this.$$.ctx[9]}get error(){return this.$$.ctx[10]}}let ct;const lt=()=>(null==ct&&(ct=new it({target:document.body})),ct),ut=t=>{lt().error(t)},ht=t=>{lt().message(t)},ft=t=>{let e=!1;const s=e=>{if(e.key!==t)return;let s;try{s=JSON.parse(e.oldValue)}catch{s=void 0}const n=JSON.parse(e.newValue);a(n,s)},a=(t,e)=>{for(const s of n)s(t,e)},n=[];return{set:e=>{localStorage.setItem(t,JSON.stringify(e))},get:()=>{try{const e=localStorage.getItem(t);return"string"==typeof e?JSON.parse(e):void 0}catch(e){return}},watch:t=>{n.push(t),e||(e=!0,window.addEventListener("storage",s));return()=>{const a=n.indexOf(t);-1!==a&&(n.splice(a,1),e&&0===n.length&&(e=!1,window.removeEventListener("storage",s)))}}}};class gt extends Error{constructor(t,e){super(e),this.status=t}}const mt=t=>{const e=A(W);return"INBOX"===t.path?e.mailboxes.Inbox:"\\Junk"===t.specialUse?e.mailboxes.Spam:"\\Sent"===t.specialUse?e.mailboxes.Sent:"\\Drafts"===t.specialUse?e.mailboxes.Drafts:"\\Trash"===t.specialUse?e.mailboxes.Trash:t.name},xt=t=>"INBOX"===t.path?F:"\\Junk"===t.specialUse?Y:"\\Sent"===t.specialUse?_:"\\Drafts"===t.specialUse?H:"\\Trash"===t.specialUse?P:K,dt=t=>"INBOX"!==t.path&&null==t.specialUse,pt=t=>"INBOX"===t.path,vt=t=>"\\Junk"===t.specialUse,wt=t=>"\\Sent"===t.specialUse,$t=t=>"\\Drafts"===t.specialUse,yt=t=>"\\Trash"===t.specialUse,bt=t=>{const e=t.find(pt),s=t.find($t),a=t.find(wt),n=t.find(vt),r=t.find(yt),o=[e,...t.filter((t=>!pt(t)&&null==t.specialUse)),s,a,n,r].filter(Boolean);for(const i of t)o.includes(i)||o.push(i);return o},St=async({page:t,fetch:e,session:s})=>{var a;let n=(null==(a=t.query)?void 0:a.toString())||"";n=n?`?${n}`:"";const r="string"==typeof t?t:`/api/pages${t.path}${n}`;{const t=await e(r);return await t.json()}},Ot=t=>async(...e)=>{try{return await t(...e)}catch(s){ut((null==s?void 0:s.message)||"Error")}},jt=async t=>{const e=await fetch(t).catch((t=>{throw new gt(500,"Cannot connect to server")})),s=await e.json().catch((t=>{throw new gt(e.status,"Invalid JSON response from server")}));if(s.error)throw new gt(e.status,s.error.message);return s},Dt=async t=>{const e=await fetch(t,{method:"DELETE"}).catch((t=>{throw new gt(500,"Cannot connect to server")})),s=await e.json().catch((t=>{throw new gt(e.status,"Invalid JSON response from server")}));if(s.error)throw new gt(e.status,s.error.message);return s},kt=async(t,e)=>{const s=await fetch(t,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).catch((t=>{throw new gt(500,"Cannot connect to server")})),a=await s.json().catch((t=>{throw new gt(s.status,"Invalid JSON response from server")}));if(a.error)throw new gt(s.status,a.error.message);return a},It=async(t,e)=>{const s=await fetch(t,{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).catch((t=>{throw new gt(500,"Cannot connect to server")})),a=await s.json().catch((t=>{throw new gt(s.status,"Invalid JSON response from server")}));if(a.error)throw new gt(s.status,a.error.message);return a},Ut=t=>/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i.test(t),Nt=()=>window.matchMedia("(max-width: 800px)").matches,Et=t=>{const e=ft("intertab.auth.watch");e.set(t);return e.watch((e=>{e!==t&&Q(null==e?"/login":"/")}))},Jt=t=>{const e=A(W),s=new Date,a=new Date(t);return s.getFullYear()!==a.getFullYear()?`${e.month[a.getMonth()]} ${a.getFullYear()}`:s.getMonth()!==a.getMonth()?`${a.getDate()} ${e.month[a.getMonth()]}`:s.getDate()!==a.getDate()?`${e.week[a.getDay()]} ${a.getDate()}`:`${a.getHours()}:${n=a.getMinutes(),n.toString().padStart(2,"0")}`;var n},zt=t=>{if(t instanceof Date)return new Date(t);if(t instanceof Array)return t.map(zt);if("object"==typeof t&&null!==t){const e={};for(const s of Object.keys(t))e[s]=zt(t[s]);return e}return t},Tt=(t,e)=>{if(t instanceof Date&&e instanceof Date)return+t==+e;if(t instanceof Array){if(!(e instanceof Array))return!1;if(t.length!==e.length)return!1;for(let s=0;s<t.length;s++)if(!Tt(t[s],e[s]))return!1;return!0}if("object"==typeof t&&null!==t){if("object"!=typeof e||null===e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s of Object.keys(t))if(!Tt(t[s],e[s]))return!1;return!0}return t===e};export{Dt as _,xt as a,Ot as b,ht as c,It as d,yt as e,$t as f,Q as g,ut as h,Nt as i,dt as j,kt as k,jt as l,mt as m,St as n,zt as o,Tt as p,Ut as q,lt as r,bt as s,Jt as t,vt as u,pt as v,Et as w,wt as x};
