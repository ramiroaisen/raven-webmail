import{S as e,i as t,s as n,e as a,c as s,a as l,d as r,b as o,f as c,D as i,E as $,F as f,j as u,m,o as d,x as p,u as h,v,k as g,t as w,n as _,g as x,G as y,H as b,I as k,J as D,r as E,w as I,h as V,K as T,L as C,M as j,N as R,O as N,P as M,Q as O,R as F,T as S,U as q,V as P,l as U,W as A,X as B,Y as X,Z as G,_ as W,$ as H,a0 as J,a1 as L,y as K,C as Q,a2 as Y,a3 as Z,a4 as z,a5 as ee,a6 as te,a7 as ne,a8 as ae,a9 as se,aa as le,ab as re,ac as oe,ad as ce,A as ie}from"../chunks/vendor-c6674e75.js";import{m as $e,a as fe,i as ue,b as me,_ as de,c as pe,g as he,d as ve,e as ge,f as we,h as _e,j as xe,k as ye,s as be,w as ke,l as De,n as Ee}from"../chunks/util-26aae2f7.js";import{n as Ie,l as Ve,p as Te}from"../chunks/locale-43eac5b3.js";import{R as Ce}from"../chunks/Ripple-ada69b16.js";import{P as je,M as Re,s as Ne}from"../chunks/signature-38791045.js";import{p as Me,M as Oe}from"../chunks/MenuItem-f687bcf2.js";import{D as Fe}from"../chunks/Dialog-fd3f6f96.js";import{T as Se}from"../chunks/TextField-aeb894d7.js";import{F as qe}from"../chunks/Formy-10413afd.js";import{_ as Pe,d as Ue}from"../chunks/compose-0c636a4e.js";import{C as Ae,E as Be,a as Xe}from"../chunks/events-5f4a58b6.js";import"../chunks/singletons-12a22614.js";import"../chunks/preload-helper-ec9aa979.js";function Ge(e){let t;return{c(){t=a("div"),this.h()},l(e){t=s(e,"DIV",{class:!0}),l(t).forEach(r),this.h()},h(){o(t,"class","navigating svelte-18sspyq")},m(n,a){c(n,t,a),e[2](t)},p:i,i:i,o:i,d(n){n&&r(t),e[2](null)}}}function We(e,t,n){let a,s,l;$(e,Ie,(e=>n(1,a=e)));let r=!!a;return e.$$.update=()=>{2&e.$$.dirty&&(e=>{if(null!=l&&r!==e)if(r=e,e){let e=.1;n(0,l.style.opacity="1",l),n(0,l.style.width=100*e+"%",l),s=requestAnimationFrame((function t(){const a=Math.min(e+.01,.9);a!==e&&(e=a,l&&n(0,l.style.width=100*e+"%",l),s=requestAnimationFrame(t))}))}else s&&cancelAnimationFrame(s),n(0,l.style.width="100%",l),n(0,l.style.opacity="0",l)})(!!a)},[l,a,function(e){f[e?"unshift":"push"]((()=>{l=e,n(0,l)}))}]}class He extends e{constructor(e){super(),t(this,e,We,Ge,n,{})}}function Je(e){let t,n,i,$,f=e[0].unseen+"";return{c(){t=a("div"),n=w(f),this.h()},l(e){t=s(e,"DIV",{class:!0});var a=l(t);n=x(a,f),a.forEach(r),this.h()},h(){o(t,"class","counter svelte-ck30k")},m(e,a){c(e,t,a),b(t,n),$=!0},p(e,t){(!$||1&t)&&f!==(f=e[0].unseen+"")&&V(n,f)},i(e){$||(e&&T((()=>{i||(i=C(t,F,{duration:200},!0)),i.run(1)})),$=!0)},o(e){e&&(i||(i=C(t,F,{duration:200},!1)),i.run(0)),$=!1},d(e){e&&r(t),e&&i&&i.end()}}}function Le(e){let t,n,i,$,w,x,D,E,I,V,j,R,N,U;function A(t){e[19](t)}$=new S({}),x=new Ce({});let B={anchor:"top-left",$$slots:{default:[nt]},$$scope:{ctx:e}};return void 0!==e[2]&&(B.open=e[2]),I=new je({props:B}),f.push((()=>M(I,"open",A))),{c(){t=a("div"),n=a("div"),i=a("div"),u($.$$.fragment),w=g(),u(x.$$.fragment),D=g(),E=a("div"),u(I.$$.fragment),this.h()},l(e){t=s(e,"DIV",{class:!0});var a=l(t);n=s(a,"DIV",{class:!0});var o=l(n);i=s(o,"DIV",{class:!0});var c=l(i);m($.$$.fragment,c),w=_(c),m(x.$$.fragment,c),c.forEach(r),D=_(o),E=s(o,"DIV",{class:!0});var f=l(E);m(I.$$.fragment,f),f.forEach(r),o.forEach(r),a.forEach(r),this.h()},h(){o(i,"class","menu-btn btn-dark svelte-ck30k"),y(i,"hover",e[2]),o(E,"class","anchor svelte-ck30k"),o(n,"class","menu-in svelte-ck30k"),o(t,"class","menu-out svelte-ck30k")},m(a,s){c(a,t,s),b(t,n),b(n,i),d($,i,null),b(i,w),d(x,i,null),b(n,D),b(n,E),d(I,E,null),R=!0,N||(U=k(i,"click",q(P(e[14]))),N=!0)},p(e,t){4&t&&y(i,"hover",e[2]);const n={};1073742041&t&&(n.$$scope={dirty:t,ctx:e}),!V&&4&t&&(V=!0,n.open=e[2],O((()=>V=!1))),I.$set(n)},i(e){R||(p($.$$.fragment,e),p(x.$$.fragment,e),p(I.$$.fragment,e),e&&T((()=>{j||(j=C(t,F,{duration:200},!0)),j.run(1)})),R=!0)},o(e){h($.$$.fragment,e),h(x.$$.fragment,e),h(I.$$.fragment,e),e&&(j||(j=C(t,F,{duration:200},!1)),j.run(0)),R=!1},d(e){e&&r(t),v($),v(x),v(I),e&&j&&j.end(),N=!1,U()}}}function Ke(e){let t,n;return t=new Oe({props:{icon:A,$$slots:{default:[Ye]},$$scope:{ctx:e}}}),t.$on("click",e[18]),{c(){u(t.$$.fragment)},l(e){m(t.$$.fragment,e)},m(e,a){d(t,e,a),n=!0},p(e,n){const a={};1073741952&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(p(t.$$.fragment,e),n=!0)},o(e){h(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function Qe(e){let t,n,a,s,l,o;return t=new Oe({props:{icon:B,$$slots:{default:[Ze]},$$scope:{ctx:e}}}),t.$on("click",e[15]),a=new Oe({props:{icon:A,$$slots:{default:[ze]},$$scope:{ctx:e}}}),a.$on("click",e[16]),l=new Oe({props:{icon:X,$$slots:{default:[et]},$$scope:{ctx:e}}}),l.$on("click",e[17]),{c(){u(t.$$.fragment),n=g(),u(a.$$.fragment),s=g(),u(l.$$.fragment)},l(e){m(t.$$.fragment,e),n=_(e),m(a.$$.fragment,e),s=_(e),m(l.$$.fragment,e)},m(e,r){d(t,e,r),c(e,n,r),d(a,e,r),c(e,s,r),d(l,e,r),o=!0},p(e,n){const s={};1073741952&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s);const r={};1073741952&n&&(r.$$scope={dirty:n,ctx:e}),a.$set(r);const o={};1073741952&n&&(o.$$scope={dirty:n,ctx:e}),l.$set(o)},i(e){o||(p(t.$$.fragment,e),p(a.$$.fragment,e),p(l.$$.fragment,e),o=!0)},o(e){h(t.$$.fragment,e),h(a.$$.fragment,e),h(l.$$.fragment,e),o=!1},d(e){v(t,e),e&&r(n),v(a,e),e&&r(s),v(l,e)}}}function Ye(e){let t,n=e[7].Delete_all_messages+"";return{c(){t=w(n)},l(e){t=x(e,n)},m(e,n){c(e,t,n)},p(e,a){128&a&&n!==(n=e[7].Delete_all_messages+"")&&V(t,n)},d(e){e&&r(t)}}}function Ze(e){let t,n=e[7].Rename_folder+"";return{c(){t=w(n)},l(e){t=x(e,n)},m(e,n){c(e,t,n)},p(e,a){128&a&&n!==(n=e[7].Rename_folder+"")&&V(t,n)},d(e){e&&r(t)}}}function ze(e){let t,n=e[7].Delete_all_messages+"";return{c(){t=w(n)},l(e){t=x(e,n)},m(e,n){c(e,t,n)},p(e,a){128&a&&n!==(n=e[7].Delete_all_messages+"")&&V(t,n)},d(e){e&&r(t)}}}function et(e){let t,n=e[7].Delete_folder+"";return{c(){t=w(n)},l(e){t=x(e,n)},m(e,n){c(e,t,n)},p(e,a){128&a&&n!==(n=e[7].Delete_folder+"")&&V(t,n)},d(e){e&&r(t)}}}function tt(e){let t,n,a,s,l;const o=[Qe,Ke],i=[];function $(e,n){return(null==t||1&n)&&(t=!!xe(e[0])),t?0:1}return n=$(e,-1),a=i[n]=o[n](e),{c(){a.c(),s=U()},l(e){a.l(e),s=U()},m(e,t){i[n].m(e,t),c(e,s,t),l=!0},p(e,t){let l=n;n=$(e,t),n===l?i[n].p(e,t):(E(),h(i[l],1,1,(()=>{i[l]=null})),I(),a=i[n],a?a.p(e,t):(a=i[n]=o[n](e),a.c()),p(a,1),a.m(s.parentNode,s))},i(e){l||(p(a),l=!0)},o(e){h(a),l=!1},d(e){i[n].d(e),e&&r(s)}}}function nt(e){let t,n;return t=new Re({props:{$$slots:{default:[tt]},$$scope:{ctx:e}}}),{c(){u(t.$$.fragment)},l(e){m(t.$$.fragment,e)},m(e,a){d(t,e,a),n=!0},p(e,n){const a={};1073742041&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(p(t.$$.fragment,e),n=!0)},o(e){h(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function at(e){let t,n;return t=new Fe({props:{title:e[7].Delete_folder+" "+$e(e[0]),width:"550px",onClose:e[22],$$slots:{default:[st]},$$scope:{ctx:e}}}),{c(){u(t.$$.fragment)},l(e){m(t.$$.fragment,e)},m(e,a){d(t,e,a),n=!0},p(e,n){const a={};129&n&&(a.title=e[7].Delete_folder+" "+$e(e[0])),8&n&&(a.onClose=e[22]),1073741952&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(p(t.$$.fragment,e),n=!0)},o(e){h(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function st(e){let t,n,i,$,f,u,m,d,p=e[7].This_action_is_permanent_all_messages_will_be_deleted+"",h=e[7].Delete_folder+"";return{c(){t=a("div"),n=a("div"),i=w(p),$=g(),f=a("button"),u=w(h),this.h()},l(e){t=s(e,"DIV",{class:!0});var a=l(t);n=s(a,"DIV",{class:!0});var o=l(n);i=x(o,p),o.forEach(r),$=_(a),f=s(a,"BUTTON",{class:!0});var c=l(f);u=x(c,h),c.forEach(r),a.forEach(r),this.h()},h(){o(n,"class","delete-label svelte-ck30k"),o(f,"class","delete-confirm btn-light btn-primary elev2 svelte-ck30k"),o(t,"class","delete-body svelte-ck30k")},m(a,s){c(a,t,s),b(t,n),b(n,i),b(t,$),b(t,f),b(f,u),m||(d=k(f,"click",e[11]),m=!0)},p(e,t){128&t&&p!==(p=e[7].This_action_is_permanent_all_messages_will_be_deleted+"")&&V(i,p),128&t&&h!==(h=e[7].Delete_folder+"")&&V(u,h)},d(e){e&&r(t),m=!1,d()}}}function lt(e){let t,n;return t=new Fe({props:{title:e[7].Rename_folder+" "+$e(e[0]),width:"550px",onClose:e[24],$$slots:{default:[rt]},$$scope:{ctx:e}}}),{c(){u(t.$$.fragment)},l(e){m(t.$$.fragment,e)},m(e,a){d(t,e,a),n=!0},p(e,n){const a={};129&n&&(a.title=e[7].Rename_folder+" "+$e(e[0])),16&n&&(a.onClose=e[24]),1073741984&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(p(t.$$.fragment,e),n=!0)},o(e){h(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function rt(e){let t,n,i,$,y,D,E,I,T,C=e[7].Rename_folder+"";function j(t){e[23](t)}let R={validate:!0,required:!0,trim:!0};return void 0!==e[5]&&(R.value=e[5]),n=new Se({props:R}),f.push((()=>M(n,"value",j))),{c(){t=a("div"),u(n.$$.fragment),$=g(),y=a("button"),D=w(C),this.h()},l(e){t=s(e,"DIV",{class:!0});var a=l(t);m(n.$$.fragment,a),$=_(a),y=s(a,"BUTTON",{class:!0});var o=l(y);D=x(o,C),o.forEach(r),a.forEach(r),this.h()},h(){o(y,"class","rename-confirm btn-light btn-primary elev2 svelte-ck30k"),o(t,"class","rename-body svelte-ck30k")},m(a,s){c(a,t,s),d(n,t,null),b(t,$),b(t,y),b(y,D),E=!0,I||(T=k(y,"click",e[12]),I=!0)},p(e,t){const a={};!i&&32&t&&(i=!0,a.value=e[5],O((()=>i=!1))),n.$set(a),(!E||128&t)&&C!==(C=e[7].Rename_folder+"")&&V(D,C)},i(e){E||(p(n.$$.fragment,e),E=!0)},o(e){h(n.$$.fragment,e),E=!1},d(e){e&&r(t),v(n),I=!1,T()}}}function ot(e){let t,n;return t=new Fe({props:{title:e[7].Delete_all_messages+" "+e[7].of+" "+$e(e[0]),width:"550px",onClose:e[25],$$slots:{default:[ct]},$$scope:{ctx:e}}}),{c(){u(t.$$.fragment)},l(e){m(t.$$.fragment,e)},m(e,a){d(t,e,a),n=!0},p(e,n){const a={};129&n&&(a.title=e[7].Delete_all_messages+" "+e[7].of+" "+$e(e[0])),64&n&&(a.onClose=e[25]),1073741952&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(p(t.$$.fragment,e),n=!0)},o(e){h(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function ct(e){let t,n,i,$,f,u,m,d,p=e[7].This_action_will_delete_all_messages_in_the_folder+"",h=e[7].Delete_all_messages+"";return{c(){t=a("div"),n=a("div"),i=w(p),$=g(),f=a("button"),u=w(h),this.h()},l(e){t=s(e,"DIV",{class:!0});var a=l(t);n=s(a,"DIV",{class:!0});var o=l(n);i=x(o,p),o.forEach(r),$=_(a),f=s(a,"BUTTON",{class:!0});var c=l(f);u=x(c,h),c.forEach(r),a.forEach(r),this.h()},h(){o(n,"class","clear-label svelte-ck30k"),o(f,"class","clear-confirm btn-light btn-primary elev2 svelte-ck30k"),o(t,"class","clear-body svelte-ck30k")},m(a,s){c(a,t,s),b(t,n),b(n,i),b(t,$),b(t,f),b(f,u),m||(d=k(f,"click",e[13]),m=!0)},p(e,t){128&t&&p!==(p=e[7].This_action_will_delete_all_messages_in_the_folder+"")&&V(i,p),128&t&&h!==(h=e[7].Delete_all_messages+"")&&V(u,h)},d(e){e&&r(t),m=!1,d()}}}function it(e){let t,n,i,$,f,N,M,O,F,S,q,P,U,A,B,X,G,W,H,J,L=$e(e[0])+"";var K=fe(e[0]);K&&(i=new K({}));const Q=[Le,Je],Y=[];function Z(e,t){return e[1]||e[2]?0:e[0].unseen?1:-1}~(O=Z(e))&&(F=Y[O]=Q[O](e)),q=new Ce({});let z=e[3]&&at(e),ee=e[4]&&lt(e),te=e[6]&&ot(e);return{c(){t=a("a"),n=a("div"),i&&u(i.$$.fragment),$=g(),f=a("div"),N=w(L),M=g(),F&&F.c(),S=g(),u(q.$$.fragment),A=g(),B=a("div"),z&&z.c(),X=g(),ee&&ee.c(),G=g(),te&&te.c(),this.h()},l(e){t=s(e,"A",{href:!0,class:!0});var a=l(t);n=s(a,"DIV",{class:!0});var o=l(n);i&&m(i.$$.fragment,o),o.forEach(r),$=_(a),f=s(a,"DIV",{class:!0});var c=l(f);N=x(c,L),c.forEach(r),M=_(a),F&&F.l(a),S=_(a),m(q.$$.fragment,a),a.forEach(r),A=_(e),B=s(e,"DIV",{class:!0});var u=l(B);z&&z.l(u),X=_(u),ee&&ee.l(u),G=_(u),te&&te.l(u),u.forEach(r),this.h()},h(){o(n,"class","icon svelte-ck30k"),o(f,"class","name svelte-ck30k"),o(t,"href",P="/mailbox/"+e[0].id),o(t,"class","mailbox na btn-dark svelte-ck30k"),y(t,"current",e[8].path.startsWith(`/mailbox/${e[0].id}`)),y(t,"menu-open",e[2]),o(B,"class","portal svelte-ck30k")},m(a,s){c(a,t,s),b(t,n),i&&d(i,n,null),b(t,$),b(t,f),b(f,N),b(t,M),~O&&Y[O].m(t,null),b(t,S),d(q,t,null),c(a,A,s),c(a,B,s),z&&z.m(B,null),b(B,X),ee&&ee.m(B,null),b(B,G),te&&te.m(B,null),W=!0,H||(J=[k(t,"click",e[10]),k(t,"mouseenter",e[20]),k(t,"mouseleave",e[21]),D(Me.call(null,B))],H=!0)},p(e,[a]){if(K!==(K=fe(e[0]))){if(i){E();const e=i;h(e.$$.fragment,1,0,(()=>{v(e,1)})),I()}K?(i=new K({}),u(i.$$.fragment),p(i.$$.fragment,1),d(i,n,null)):i=null}(!W||1&a)&&L!==(L=$e(e[0])+"")&&V(N,L);let s=O;O=Z(e),O===s?~O&&Y[O].p(e,a):(F&&(E(),h(Y[s],1,1,(()=>{Y[s]=null})),I()),~O?(F=Y[O],F?F.p(e,a):(F=Y[O]=Q[O](e),F.c()),p(F,1),F.m(t,S)):F=null),(!W||1&a&&P!==(P="/mailbox/"+e[0].id))&&o(t,"href",P),257&a&&y(t,"current",e[8].path.startsWith(`/mailbox/${e[0].id}`)),4&a&&y(t,"menu-open",e[2]),e[3]?z?(z.p(e,a),8&a&&p(z,1)):(z=at(e),z.c(),p(z,1),z.m(B,X)):z&&(E(),h(z,1,1,(()=>{z=null})),I()),e[4]?ee?(ee.p(e,a),16&a&&p(ee,1)):(ee=lt(e),ee.c(),p(ee,1),ee.m(B,G)):ee&&(E(),h(ee,1,1,(()=>{ee=null})),I()),e[6]?te?(te.p(e,a),64&a&&p(te,1)):(te=ot(e),te.c(),p(te,1),te.m(B,null)):te&&(E(),h(te,1,1,(()=>{te=null})),I())},i(e){W||(i&&p(i.$$.fragment,e),p(F),p(q.$$.fragment,e),e&&T((()=>{U||(U=C(t,j,{duration:200},!0)),U.run(1)})),p(z),p(ee),p(te),W=!0)},o(e){i&&h(i.$$.fragment,e),h(F),h(q.$$.fragment,e),e&&(U||(U=C(t,j,{duration:200},!1)),U.run(0)),h(z),h(ee),h(te),W=!1},d(e){e&&r(t),i&&v(i),~O&&Y[O].d(),v(q),e&&U&&U.end(),e&&r(A),e&&r(B),z&&z.d(),ee&&ee.d(),te&&te.d(),H=!1,R(J)}}}function $t(e,t,n){let a,s,l;$(e,Ve,(e=>n(7,a=e))),$(e,Te,(e=>n(8,l=e)));var r=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(s,l){function r(e){try{c(a.next(e))}catch(t){l(t)}}function o(e){try{c(a.throw(e))}catch(t){l(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}c((a=a.apply(e,t||[])).next())}))};let{mailbox:o}=t;const{reloadMailboxes:c,mailboxes:i,drawerOpen:{narrow:f}}=N("dash");$(e,i,(e=>n(26,s=e)));let u=!1,m=!1,d=!1;const p=me((()=>r(void 0,void 0,void 0,(function*(){yield de(`/api/mailboxes/${o.id}`),n(3,d=!1),pe(a.notifier.Folder_deleted),l.params.mailbox===o.id&&he("/"),yield c()}))));let h=!1,v=o.path;const g=me((()=>r(void 0,void 0,void 0,(function*(){yield ve(`/api/mailboxes/${o.id}`,{path:v}),pe(a.notifier.Folder_renamed),n(4,h=!1),yield c()}))));let w=!1;const _=me((()=>r(void 0,void 0,void 0,(function*(){if(ge(o)||we(o))de(`/api/mailboxes/${o.id}/messages`).then((()=>{pe(a.notifier.All_messages_deleted)})).catch((e=>{_e(null==e?void 0:e.message)}));else{const e=s.find(ge);if(null==e)throw new Error("Cannot find Trash folder");ve(`/api/mailboxes/${o.id}/messages`,{message:`1:${Number.MAX_SAFE_INTEGER}`,moveTo:e.id}).then((()=>{pe(a.notifier.All_messages_deleted)})).catch((e=>{_e(null==e?void 0:e.message)}))}n(6,w=!1),o.total>50&&pe(a.notifier.Deleting_process)}))));return e.$$set=e=>{"mailbox"in e&&n(0,o=e.mailbox)},[o,u,m,d,h,v,w,a,l,i,()=>{ue()&&f.set(!1)},p,g,_,()=>n(2,m=!m),()=>n(4,h=!0),()=>n(6,w=!0),()=>n(3,d=!0),()=>n(6,w=!0),function(e){m=e,n(2,m)},()=>n(1,u=!0),()=>n(1,u=!1),()=>n(3,d=!1),function(e){v=e,n(5,v)},()=>n(4,h=!1),()=>n(6,w=!1)]}class ft extends e{constructor(e){super(),t(this,e,$t,it,n,{mailbox:0})}}function ut(e,t,n){const a=e.slice();return a[24]=t[n],a}function mt(e,t){let n,a,s;return a=new ft({props:{mailbox:t[24]}}),{key:e,first:null,c(){n=U(),u(a.$$.fragment),this.h()},l(e){n=U(),m(a.$$.fragment,e),this.h()},h(){this.first=n},m(e,t){c(e,n,t),d(a,e,t),s=!0},p(e,n){t=e;const s={};8&n&&(s.mailbox=t[24]),a.$set(s)},i(e){s||(p(a.$$.fragment,e),s=!0)},o(e){h(a.$$.fragment,e),s=!1},d(e){e&&r(n),v(a,e)}}}function dt(e){let t,n;return t=new Fe({props:{title:e[2].Create_new_folder,width:"500px",onClose:e[19],$$slots:{default:[ht]},$$scope:{ctx:e}}}),{c(){u(t.$$.fragment)},l(e){m(t.$$.fragment,e)},m(e,a){d(t,e,a),n=!0},p(e,n){const a={};4&n&&(a.title=e[2].Create_new_folder),1&n&&(a.onClose=e[19]),134217734&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(p(t.$$.fragment,e),n=!0)},o(e){h(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function pt(e){let t,n,i,$,y,D,E,I,T,C,j,R,N=e[2].Create+"";function F(t){e[18](t)}let S={validate:!0,required:!0,trim:!0,label:e[2].Folder_name};return void 0!==e[1]&&(S.value=e[1]),i=new Se({props:S}),f.push((()=>M(i,"value",F))),T=new Ce({}),{c(){t=a("form"),n=a("div"),u(i.$$.fragment),y=g(),D=a("button"),E=w(N),I=g(),u(T.$$.fragment),this.h()},l(e){t=s(e,"FORM",{class:!0});var a=l(t);n=s(a,"DIV",{class:!0});var o=l(n);m(i.$$.fragment,o),o.forEach(r),y=_(a),D=s(a,"BUTTON",{type:!0,class:!0});var c=l(D);E=x(c,N),I=_(c),m(T.$$.fragment,c),c.forEach(r),a.forEach(r),this.h()},h(){o(n,"class","create-name svelte-atm9nl"),o(D,"type","submit"),o(D,"class","create-send elev2 btn-light btn-primary svelte-atm9nl"),o(t,"class","create-form svelte-atm9nl")},m(a,s){c(a,t,s),b(t,n),d(i,n,null),b(t,y),b(t,D),b(D,E),b(D,I),d(T,D,null),C=!0,j||(R=k(t,"submit",P((function(){Z(e[23])&&e[23].apply(this,arguments)}))),j=!0)},p(t,n){e=t;const a={};4&n&&(a.label=e[2].Folder_name),!$&&2&n&&($=!0,a.value=e[1],O((()=>$=!1))),i.$set(a),(!C||4&n)&&N!==(N=e[2].Create+"")&&V(E,N)},i(e){C||(p(i.$$.fragment,e),p(T.$$.fragment,e),C=!0)},o(e){h(i.$$.fragment,e),h(T.$$.fragment,e),C=!1},d(e){e&&r(t),v(i),v(T),j=!1,R()}}}function ht(e){let t,n;return t=new qe({props:{action:e[14],$$slots:{default:[pt,({submit:e})=>({23:e}),({submit:e})=>e?8388608:0]},$$scope:{ctx:e}}}),{c(){u(t.$$.fragment)},l(e){m(t.$$.fragment,e)},m(e,a){d(t,e,a),n=!0},p(e,n){const a={};142606342&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(p(t.$$.fragment,e),n=!0)},o(e){h(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function vt(e){let t,n,i,$,f,D,T,C,j,N,M,O,F,S,q,P,A,B,X,K,Q,Y,Z,z,ee,te,ne,ae,se,le,re,oe,ce,ie,$e,fe,ue,me,de=e[2].Raven+"",pe=e[2].Compose+"",he=[],ve=new Map,ge=e[2].Create_new_folder+"";D=new G({}),C=new Ce({}),P=new W({}),K=new Ce({});let we=e[3];const _e=e=>e[24].id;for(let a=0;a<we.length;a+=1){let t=ut(e,we,a),n=_e(t);ve.set(n,he[a]=mt(n,t))}se=new H({}),ce=new Ce({});let xe=e[0]&&dt(e);return{c(){t=a("div"),n=g(),i=a("div"),$=a("div"),f=a("div"),u(D.$$.fragment),T=g(),u(C.$$.fragment),j=g(),N=a("div"),M=w(de),O=g(),F=a("div"),S=a("button"),q=a("div"),u(P.$$.fragment),A=g(),B=w(pe),X=g(),u(K.$$.fragment),Q=g(),Y=a("div"),Z=a("div");for(let e=0;e<he.length;e+=1)he[e].c();z=g(),ee=a("div"),te=g(),ne=a("div"),ae=a("div"),u(se.$$.fragment),le=g(),re=w(ge),oe=g(),u(ce.$$.fragment),ie=g(),xe&&xe.c(),$e=U(),this.h()},l(e){t=s(e,"DIV",{class:!0}),l(t).forEach(r),n=_(e),i=s(e,"DIV",{class:!0});var a=l(i);$=s(a,"DIV",{class:!0});var o=l($);f=s(o,"DIV",{class:!0});var c=l(f);m(D.$$.fragment,c),T=_(c),m(C.$$.fragment,c),c.forEach(r),j=_(o),N=s(o,"DIV",{class:!0});var u=l(N);M=x(u,de),u.forEach(r),o.forEach(r),O=_(a),F=s(a,"DIV",{class:!0});var d=l(F);S=s(d,"BUTTON",{class:!0});var p=l(S);q=s(p,"DIV",{class:!0});var h=l(q);m(P.$$.fragment,h),h.forEach(r),A=_(p),B=x(p,pe),X=_(p),m(K.$$.fragment,p),p.forEach(r),d.forEach(r),Q=_(a),Y=s(a,"DIV",{class:!0});var v=l(Y);Z=s(v,"DIV",{class:!0});var g=l(Z);for(let t=0;t<he.length;t+=1)he[t].l(g);g.forEach(r),z=_(v),ee=s(v,"DIV",{class:!0}),l(ee).forEach(r),te=_(v),ne=s(v,"DIV",{class:!0});var w=l(ne);ae=s(w,"DIV",{class:!0});var y=l(ae);m(se.$$.fragment,y),y.forEach(r),le=_(w),re=x(w,ge),oe=_(w),m(ce.$$.fragment,w),w.forEach(r),v.forEach(r),a.forEach(r),ie=_(e),xe&&xe.l(e),$e=U(),this.h()},h(){o(t,"class","overlay only-narrow svelte-atm9nl"),y(t,"open",e[5]),o(f,"class","menu btn-dark svelte-atm9nl"),o(N,"class","logo svelte-atm9nl"),o($,"class","top only-narrow svelte-atm9nl"),o(q,"class","compose-icon svelte-atm9nl"),o(S,"class","compose svelte-atm9nl"),o(F,"class","compose-wrap svelte-atm9nl"),y(F,"scrolled",0!==e[4]),o(Z,"class","mailboxes"),o(ee,"class","sep svelte-atm9nl"),o(ae,"class","new-icon svelte-atm9nl"),o(ne,"class","new btn-dark svelte-atm9nl"),o(Y,"class","scroll thin-scroll svelte-atm9nl"),o(i,"class","drawer svelte-atm9nl"),y(i,"narrow-open",e[5]),y(i,"wide-open",e[6])},m(a,s){c(a,t,s),c(a,n,s),c(a,i,s),b(i,$),b($,f),d(D,f,null),b(f,T),d(C,f,null),b($,j),b($,N),b(N,M),b(i,O),b(i,F),b(F,S),b(S,q),d(P,q,null),b(S,A),b(S,B),b(S,X),d(K,S,null),b(i,Q),b(i,Y),b(Y,Z);for(let e=0;e<he.length;e+=1)he[e].m(Z,null);b(Y,z),b(Y,ee),b(Y,te),b(Y,ne),b(ne,ae),d(se,ae,null),b(ne,le),b(ne,re),b(ne,oe),d(ce,ne,null),c(a,ie,s),xe&&xe.m(a,s),c(a,$e,s),fe=!0,ue||(me=[k(t,"click",e[15]),k(f,"click",e[16]),k(S,"click",e[17]),k(ne,"click",e[13]),k(Y,"scroll",e[11])],ue=!0)},p(e,[n]){32&n&&y(t,"open",e[5]),(!fe||4&n)&&de!==(de=e[2].Raven+"")&&V(M,de),(!fe||4&n)&&pe!==(pe=e[2].Compose+"")&&V(B,pe),16&n&&y(F,"scrolled",0!==e[4]),8&n&&(we=e[3],E(),he=J(he,n,_e,1,e,we,ve,Z,L,mt,null,ut),I()),(!fe||4&n)&&ge!==(ge=e[2].Create_new_folder+"")&&V(re,ge),32&n&&y(i,"narrow-open",e[5]),64&n&&y(i,"wide-open",e[6]),e[0]?xe?(xe.p(e,n),1&n&&p(xe,1)):(xe=dt(e),xe.c(),p(xe,1),xe.m($e.parentNode,$e)):xe&&(E(),h(xe,1,1,(()=>{xe=null})),I())},i(e){if(!fe){p(D.$$.fragment,e),p(C.$$.fragment,e),p(P.$$.fragment,e),p(K.$$.fragment,e);for(let e=0;e<we.length;e+=1)p(he[e]);p(se.$$.fragment,e),p(ce.$$.fragment,e),p(xe),fe=!0}},o(e){h(D.$$.fragment,e),h(C.$$.fragment,e),h(P.$$.fragment,e),h(K.$$.fragment,e);for(let t=0;t<he.length;t+=1)h(he[t]);h(se.$$.fragment,e),h(ce.$$.fragment,e),h(xe),fe=!1},d(e){e&&r(t),e&&r(n),e&&r(i),v(D),v(C),v(P),v(K);for(let t=0;t<he.length;t+=1)he[t].d();v(se),v(ce),e&&r(ie),xe&&xe.d(e),e&&r($e),ue=!1,R(me)}}}function gt(e,t,n){let a,s,l,r,o;$(e,Ve,(e=>n(2,a=e)));var c=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(s,l){function r(e){try{c(a.next(e))}catch(t){l(t)}}function o(e){try{c(a.throw(e))}catch(t){l(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}c((a=a.apply(e,t||[])).next())}))};const{mailboxes:i,reloadMailboxes:f,drawerOpen:{wide:u,narrow:m}}=N("dash");$(e,i,(e=>n(3,s=e))),$(e,u,(e=>n(6,o=e))),$(e,m,(e=>n(5,r=e)));const d=Q(0);$(e,d,(e=>n(4,l=e))),K("drawer",{scrollTop:d});const p=me((()=>c(void 0,void 0,void 0,(function*(){yield Pe(s.find(we))}))));let h=!1,v="";const g=me((()=>c(void 0,void 0,void 0,(function*(){yield ye("/api/mailboxes",{path:v}),n(0,h=!1),pe(a.notifier.New_folder_created),yield f()}))));return[h,v,a,s,l,r,o,i,u,m,d,e=>{const t=e.target;Y(d,l=t.scrollTop,l)},p,()=>n(0,h=!0),g,()=>ue()?m.set(!1):u.set(!1),()=>m.set(!1),()=>{m.set(!1),p()},function(e){v=e,n(1,v)},()=>n(0,h=!1)]}class wt extends e{constructor(e){super(),t(this,e,gt,vt,n,{})}}function _t(e){let t,n=e[2].My_account+"";return{c(){t=w(n)},l(e){t=x(e,n)},m(e,n){c(e,t,n)},p(e,a){4&a&&n!==(n=e[2].My_account+"")&&V(t,n)},d(e){e&&r(t)}}}function xt(e){let t,n=e[2].Sign_out+"";return{c(){t=w(n)},l(e){t=x(e,n)},m(e,n){c(e,t,n)},p(e,a){4&a&&n!==(n=e[2].Sign_out+"")&&V(t,n)},d(e){e&&r(t)}}}function yt(e){let t,n,a,s;return t=new Oe({props:{icon:z,href:"/me",$$slots:{default:[_t]},$$scope:{ctx:e}}}),a=new Oe({props:{icon:ee,$$slots:{default:[xt]},$$scope:{ctx:e}}}),a.$on("click",e[3]),{c(){u(t.$$.fragment),n=g(),u(a.$$.fragment)},l(e){m(t.$$.fragment,e),n=_(e),m(a.$$.fragment,e)},m(e,l){d(t,e,l),c(e,n,l),d(a,e,l),s=!0},p(e,n){const s={};132&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s);const l={};132&n&&(l.$$scope={dirty:n,ctx:e}),a.$set(l)},i(e){s||(p(t.$$.fragment,e),p(a.$$.fragment,e),s=!0)},o(e){h(t.$$.fragment,e),h(a.$$.fragment,e),s=!1},d(e){v(t,e),e&&r(n),v(a,e)}}}function bt(e){let t,n;return t=new Re({props:{$$slots:{default:[yt]},$$scope:{ctx:e}}}),{c(){u(t.$$.fragment)},l(e){m(t.$$.fragment,e)},m(e,a){d(t,e,a),n=!0},p(e,n){const a={};132&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(p(t.$$.fragment,e),n=!0)},o(e){h(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function kt(e){let t,n,i,$,D,E,I,T,C,j,R,N;function F(t){e[5](t)}D=new Ce({});let S={anchor:"top-right",$$slots:{default:[bt]},$$scope:{ctx:e}};return void 0!==e[0]&&(S.open=e[0]),T=new je({props:S}),f.push((()=>M(T,"open",F))),{c(){t=a("div"),n=a("div"),i=w(e[1]),$=g(),u(D.$$.fragment),E=g(),I=a("div"),u(T.$$.fragment),this.h()},l(a){t=s(a,"DIV",{class:!0});var o=l(t);n=s(o,"DIV",{class:!0});var c=l(n);i=x(c,e[1]),$=_(c),m(D.$$.fragment,c),c.forEach(r),E=_(o),I=s(o,"DIV",{class:!0});var f=l(I);m(T.$$.fragment,f),f.forEach(r),o.forEach(r),this.h()},h(){o(n,"class","btn-dark account-btn svelte-o8d2c1"),y(n,"hover",e[0]),o(I,"class","anchor svelte-o8d2c1"),o(t,"class","wrap svelte-o8d2c1")},m(a,s){c(a,t,s),b(t,n),b(n,i),b(n,$),d(D,n,null),b(t,E),b(t,I),d(T,I,null),j=!0,R||(N=k(n,"click",e[4]),R=!0)},p(e,[t]){(!j||2&t)&&V(i,e[1]),1&t&&y(n,"hover",e[0]);const a={};132&t&&(a.$$scope={dirty:t,ctx:e}),!C&&1&t&&(C=!0,a.open=e[0],O((()=>C=!1))),T.$set(a)},i(e){j||(p(D.$$.fragment,e),p(T.$$.fragment,e),j=!0)},o(e){h(D.$$.fragment,e),h(T.$$.fragment,e),j=!1},d(e){e&&r(t),v(D),v(T),R=!1,N()}}}function Dt(e,t,n){let a;$(e,Ve,(e=>n(2,a=e)));var s=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(s,l){function r(e){try{c(a.next(e))}catch(t){l(t)}}function o(e){try{c(a.throw(e))}catch(t){l(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}c((a=a.apply(e,t||[])).next())}))};let{username:l}=t,{open:r=!1}=t;const o=me((()=>s(void 0,void 0,void 0,(function*(){yield ye("/api/logout",{}),he("/login")}))));return e.$$set=e=>{"username"in e&&n(1,l=e.username),"open"in e&&n(0,r=e.open)},[r,l,a,o,()=>n(0,r=!r),function(e){r=e,n(0,r)}]}class Et extends e{constructor(e){super(),t(this,e,Dt,kt,n,{username:1,open:0})}}function It(e){let t,n,i,$,f,y,D,E,I,T,C,j,N,M,O,F,S,q,P,U,A,B=e[2].Raven+"";return i=new G({}),f=new Ce({}),N=new te({}),q=new Et({props:{username:e[0]}}),{c(){t=a("div"),n=a("div"),u(i.$$.fragment),$=g(),u(f.$$.fragment),y=g(),D=a("div"),E=w(B),I=g(),T=a("div"),C=a("div"),j=a("div"),u(N.$$.fragment),M=g(),O=a("input"),S=g(),u(q.$$.fragment),this.h()},l(e){t=s(e,"DIV",{class:!0});var a=l(t);n=s(a,"DIV",{class:!0});var o=l(n);m(i.$$.fragment,o),$=_(o),m(f.$$.fragment,o),o.forEach(r),y=_(a),D=s(a,"DIV",{class:!0});var c=l(D);E=x(c,B),c.forEach(r),I=_(a),T=s(a,"DIV",{class:!0});var u=l(T);C=s(u,"DIV",{class:!0});var d=l(C);j=s(d,"DIV",{class:!0});var p=l(j);m(N.$$.fragment,p),p.forEach(r),M=_(d),O=s(d,"INPUT",{type:!0,class:!0,placeholder:!0}),d.forEach(r),u.forEach(r),S=_(a),m(q.$$.fragment,a),a.forEach(r),this.h()},h(){o(n,"class","menu btn-light svelte-1faf6u5"),o(D,"class","logo svelte-1faf6u5"),o(j,"class","search-icon svelte-1faf6u5"),o(O,"type","text"),o(O,"class","q svelte-1faf6u5"),o(O,"placeholder",F=e[2]["Search..."]),o(C,"class","q-wrap svelte-1faf6u5"),o(T,"class","q-wrap-wrap svelte-1faf6u5"),o(t,"class","top svelte-1faf6u5")},m(a,s){c(a,t,s),b(t,n),d(i,n,null),b(n,$),d(f,n,null),b(t,y),b(t,D),b(D,E),b(t,I),b(t,T),b(T,C),b(C,j),d(N,j,null),b(C,M),b(C,O),ne(O,e[1]),b(t,S),d(q,t,null),P=!0,U||(A=[k(n,"click",e[3]),k(O,"keypress",e[4]),k(O,"input",e[5])],U=!0)},p(e,[t]){(!P||4&t)&&B!==(B=e[2].Raven+"")&&V(E,B),(!P||4&t&&F!==(F=e[2]["Search..."]))&&o(O,"placeholder",F),2&t&&O.value!==e[1]&&ne(O,e[1]);const n={};1&t&&(n.username=e[0]),q.$set(n)},i(e){P||(p(i.$$.fragment,e),p(f.$$.fragment,e),p(N.$$.fragment,e),p(q.$$.fragment,e),P=!0)},o(e){h(i.$$.fragment,e),h(f.$$.fragment,e),h(N.$$.fragment,e),h(q.$$.fragment,e),P=!1},d(e){e&&r(t),v(i),v(f),v(N),v(q),U=!1,R(A)}}}function Vt(e,t,n){let a,s;$(e,Te,(e=>n(7,a=e))),$(e,Ve,(e=>n(2,s=e)));var l=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(s,l){function r(e){try{c(a.next(e))}catch(t){l(t)}}function o(e){try{c(a.throw(e))}catch(t){l(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}c((a=a.apply(e,t||[])).next())}))};let{username:r}=t,o="/search"===a.path&&a.query.get("query")||"";const{toggle:c}=N("dash");return e.$$set=e=>{"username"in e&&n(0,r=e.username)},[r,o,s,c,e=>l(void 0,void 0,void 0,(function*(){if("Enter"===e.key){let e=o.trim();if(e)try{yield he(`/search?query=${encodeURIComponent(e)}`,{keepfocus:!0,replaceState:"/search"===location.pathname})}finally{}}})),function(){o=this.value,n(1,o)}]}class Tt extends e{constructor(e){super(),t(this,e,Vt,It,n,{username:0})}}function Ct(e){let t,n,i,$,f,w,x,y,k,D,E;n=new He({}),$=new Tt({props:{username:e[0]}}),x=new wt({});const I=e[5].default,V=ae(I,e,e[4],null);return{c(){t=a("div"),u(n.$$.fragment),i=g(),u($.$$.fragment),f=g(),w=a("div"),u(x.$$.fragment),y=g(),k=a("div"),V&&V.c(),this.h()},l(e){t=s(e,"DIV",{class:!0});var a=l(t);m(n.$$.fragment,a),i=_(a),m($.$$.fragment,a),f=_(a),w=s(a,"DIV",{class:!0});var o=l(w);m(x.$$.fragment,o),y=_(o),k=s(o,"DIV",{class:!0});var c=l(k);V&&V.l(c),c.forEach(r),o.forEach(r),a.forEach(r),this.h()},h(){o(k,"class","page svelte-1kk7j49"),o(w,"class","main svelte-1kk7j49"),o(t,"class","dashboard svelte-1kk7j49")},m(e,a){c(e,t,a),d(n,t,null),b(t,i),d($,t,null),b(t,f),b(t,w),d(x,w,null),b(w,y),b(w,k),V&&V.m(k,null),E=!0},p(e,[t]){const n={};1&t&&(n.username=e[0]),$.$set(n),V&&V.p&&(!E||16&t)&&se(V,I,e,e[4],E?re(I,e[4],t,null):le(e[4]),null)},i(e){E||(p(n.$$.fragment,e),p($.$$.fragment,e),p(x.$$.fragment,e),p(V,e),D||T((()=>{D=oe(t,ce,{duration:400,y:-25}),D.start()})),E=!0)},o(e){h(n.$$.fragment,e),h($.$$.fragment,e),h(x.$$.fragment,e),h(V,e),E=!1},d(e){e&&r(t),v(n),v($),v(x),V&&V.d(e)}}}function jt(e,t,n){let a,{$$slots:s={},$$scope:l}=t;var r=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(s,l){function r(e){try{c(a.next(e))}catch(t){l(t)}}function o(e){try{c(a.throw(e))}catch(t){l(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}c((a=a.apply(e,t||[])).next())}))};let{user:o}=t,{username:c}=t,{mailboxes:i}=t;const f=Q(be(i));$(e,f,(e=>n(6,a=e)));const u={drawerOpen:{narrow:Q(!1),wide:Q(!0)},user:o,toggle:()=>{ue()?u.drawerOpen.narrow.update((e=>!e)):u.drawerOpen.wide.update((e=>!e))},mailboxes:f,reloadMailboxes:()=>r(void 0,void 0,void 0,(function*(){const e=yield De("/api/mailboxes");Y(f,a=be(e.results),a)}))};return K("dash",u),ie((()=>{var e;const t=new EventSource("/api/updates");t.onmessage=e=>{const t=JSON.parse(e.data);console.log(t),"COUNTERS"===t.command?Ae.dispatch(t):"EXISTS"===t.command?Be.dispatch(t):"EXPUNGE"===t.command&&Xe.dispatch(t)};const n=[Ae.on((e=>{const t=a.find((t=>t.id===e.mailbox));t&&(t.total=e.total,t.unseen=e.unseen,f.set(a))})),ke(null!==(e=null==o?void 0:o.id)&&void 0!==e?e:null),()=>t.close(),()=>Ue()];return()=>{R(n)}})),e.$$set=e=>{"user"in e&&n(2,o=e.user),"username"in e&&n(0,c=e.username),"mailboxes"in e&&n(3,i=e.mailboxes),"$$scope"in e&&n(4,l=e.$$scope)},[c,f,o,i,l,s]}class Rt extends e{constructor(e){super(),t(this,e,jt,Ct,n,{user:2,username:0,mailboxes:3})}}function Nt(e){let t;const n=e[3].default,a=ae(n,e,e[7],null);return{c(){a&&a.c()},l(e){a&&a.l(e)},m(e,n){a&&a.m(e,n),t=!0},p(e,s){a&&a.p&&(!t||128&s)&&se(a,n,e,e[7],t?re(n,e[7],s,null):le(e[7]),null)},i(e){t||(p(a,e),t=!0)},o(e){h(a,e),t=!1},d(e){a&&a.d(e)}}}function Mt(e){let t,n,a,s,l;function r(t){e[4](t)}function o(t){e[5](t)}function c(t){e[6](t)}let i={$$slots:{default:[Nt]},$$scope:{ctx:e}};return void 0!==e[1]&&(i.username=e[1]),void 0!==e[0]&&(i.user=e[0]),void 0!==e[2]&&(i.mailboxes=e[2]),t=new Rt({props:i}),f.push((()=>M(t,"username",r))),f.push((()=>M(t,"user",o))),f.push((()=>M(t,"mailboxes",c))),{c(){u(t.$$.fragment)},l(e){m(t.$$.fragment,e)},m(e,n){d(t,e,n),l=!0},p(e,[l]){const r={};128&l&&(r.$$scope={dirty:l,ctx:e}),!n&&2&l&&(n=!0,r.username=e[1],O((()=>n=!1))),!a&&1&l&&(a=!0,r.user=e[0],O((()=>a=!1))),!s&&4&l&&(s=!0,r.mailboxes=e[2],O((()=>s=!1))),t.$set(r)},i(e){l||(p(t.$$.fragment,e),l=!0)},o(e){h(t.$$.fragment,e),l=!1},d(e){v(t,e)}}}var Ot=function(e,t,n,a){return new(n||(n=Promise))((function(s,l){function r(e){try{c(a.next(e))}catch(t){l(t)}}function o(e){try{c(a.throw(e))}catch(t){l(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}c((a=a.apply(e,t||[])).next())}))};const Ft=({fetch:e,session:t})=>Ot(void 0,void 0,void 0,(function*(){return yield Ee({page:"/api/pages/layout",fetch:e,session:t})}));function St(e,t,n){let{$$slots:a={},$$scope:s}=t;this&&this.__awaiter;let{user:l}=t,{username:r}=t,{mailboxes:o}=t;return ie((()=>{var e;Ne.set((null===(e=null==l?void 0:l.metaData)||void 0===e?void 0:e.ravenSignatureHTML)||"")})),e.$$set=e=>{"user"in e&&n(0,l=e.user),"username"in e&&n(1,r=e.username),"mailboxes"in e&&n(2,o=e.mailboxes),"$$scope"in e&&n(7,s=e.$$scope)},[l,r,o,a,function(e){r=e,n(1,r)},function(e){l=e,n(0,l)},function(e){o=e,n(2,o)},s]}class qt extends e{constructor(e){super(),t(this,e,St,Mt,n,{user:0,username:1,mailboxes:2})}}export{qt as default,Ft as load};
