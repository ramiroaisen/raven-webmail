import{S as e,a as s,s as a,T as t,h as l,j as n,D as o,m as c,k as r,E as i,l as u,c as f,d as m,e as d,o as p,p as $,F as v,w as h,A as g,y as b,f as w,B as y,G as j,H as x,I as P}from"./main-23b8fde1.js";import{P as S}from"./Password-afc19acc.js";function D(e){let s,a=e[0].action+"";return{c(){s=i(a)},m(e,a){m(e,s,a)},p(e,t){1&t&&a!==(a=e[0].action+"")&&v(s,a)},d(e){e&&w(s)}}}function E(e){let s,a,j,x,P,E,O,T,k,A,B,F,G,H,I,J=e[0].title+"";function N(s){e[6].call(null,s)}document.title=s=e[0].title;let q={name:"username",label:e[0].labels.username};void 0!==e[1]&&(q.value=e[1]);const z=new t({props:q});function C(s){e[7].call(null,s)}l.push(()=>n(z,"value",N));let K={name:"password",label:e[0].labels.password};void 0!==e[2]&&(K.value=e[2]);const L=new S({props:K});l.push(()=>n(L,"value",C));const M=new o({props:{color:"var(--pc)",raised:!0,$$slots:{default:[D]},$$scope:{ctx:e}}});return{c(){a=c(),j=r("h1"),x=i(J),P=c(),E=r("form"),O=r("div"),u(z.$$.fragment),k=c(),A=r("div"),u(L.$$.fragment),F=c(),G=r("div"),u(M.$$.fragment),f(j,"class","svelte-10shc8e"),f(O,"class","field svelte-10shc8e"),f(A,"class","field svelte-10shc8e"),f(G,"class","button svelte-10shc8e"),f(E,"action","#!/login"),f(E,"method","post"),f(E,"class","svelte-10shc8e")},m(s,t,l){m(s,a,t),m(s,j,t),d(j,x),m(s,P,t),m(s,E,t),d(E,O),p(z,O,null),d(E,k),d(E,A),p(L,A,null),d(E,F),d(E,G),p(M,G,null),H=!0,l&&I(),I=$(E,"submit",e[3])},p(e,[a]){(!H||1&a)&&s!==(s=e[0].title)&&(document.title=s),(!H||1&a)&&J!==(J=e[0].title+"")&&v(x,J);const t={};1&a&&(t.label=e[0].labels.username),!T&&2&a&&(T=!0,t.value=e[1],h(()=>T=!1)),z.$set(t);const l={};1&a&&(l.label=e[0].labels.password),!B&&4&a&&(B=!0,l.value=e[2],h(()=>B=!1)),L.$set(l);const n={};257&a&&(n.$$scope={dirty:a,ctx:e}),M.$set(n)},i(e){H||(g(z.$$.fragment,e),g(L.$$.fragment,e),g(M.$$.fragment,e),H=!0)},o(e){b(z.$$.fragment,e),b(L.$$.fragment,e),b(M.$$.fragment,e),H=!1},d(e){e&&w(a),e&&w(j),e&&w(P),e&&w(E),y(z),y(L),y(M),I()}}}function O(e,s,a){let t,l="",n="";const{locale:o}=j("app");x(e,o,e=>a(5,t=e));let{locale:c=t.login}=s;return e.$set=e=>{"locale"in e&&a(0,c=e.locale)},[c,l,n,async e=>{e.preventDefault();try{const e=await fetch("/login",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:l,password:n})}).then(e=>e.json());if(e.error)throw new Error(e.error.message);location.href="/"}catch(e){P().add({variant:"error",text:e.message})}},o,t,function(e){l=e,a(1,l)},function(e){n=e,a(2,n)}]}export default class extends e{constructor(e){super(),s(this,e,O,E,a,{locale:0})}}
//# sourceMappingURL=Login-bec9a9ee.js.map
