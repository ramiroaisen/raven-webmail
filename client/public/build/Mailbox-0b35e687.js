import{J as e,S as t,a as n,s,b as i,c as l,d as o,e as a,n as r,f as c,K as d,k as m,m as $,l as u,E as g,L as f,M as h,o as p,r as x,p as w,N as v,q as b,x as B,y as L,z as y,A as z,F as k,B as M,G as H,H as A,O as V,P as C,Q as D,R as j,U as S,V as Z,W as _,X as T,Y as F,Z as U,_ as Y,$ as N,a0 as P,a1 as R,a2 as E,a3 as I,a4 as q,a5 as G,a6 as J,a7 as K,a8 as O,a9 as Q,aa as W,ab as X,ac as ee,ad as te,ae as ne,af as se,ag as ie,u as le,ah as oe}from"./main-8e0456e1.js";import{T as ae,a as re,M as ce,b as de,c as me,U as $e}from"./MoveTo-a5eb84a5.js";function ue(e){let t,n;return{c(){t=i("svg"),n=i("path"),l(n,"d","M12,15.39L8.24,17.66L9.23,13.38L5.91,10.5L10.29,10.13L12,6.09L13.71,10.13L18.09,10.5L14.77,13.38L15.76,17.66M22,9.24L14.81,8.63L12,2L9.19,8.63L2,9.24L7.45,13.97L5.82,21L12,17.27L18.18,21L16.54,13.97L22,9.24Z"),l(n,"fill",e[2]),l(t,"width",e[0]),l(t,"height",e[1]),l(t,"viewBox",e[3])},m(e,s){o(e,t,s),a(t,n)},p(e,[s]){4&s&&l(n,"fill",e[2]),1&s&&l(t,"width",e[0]),2&s&&l(t,"height",e[1]),8&s&&l(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function ge(e,t,n){let{size:s="1em"}=t,{width:i=s}=t,{height:l=s}=t,{color:o="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,s=e.size),"width"in e&&n(0,i=e.width),"height"in e&&n(1,l=e.height),"color"in e&&n(2,o=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[i,l,o,a,s]}class fe extends t{constructor(e){super(),n(this,e,ge,ue,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function he(e){let t,n;return{c(){t=i("svg"),n=i("path"),l(n,"d","M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z"),l(n,"fill",e[2]),l(t,"width",e[0]),l(t,"height",e[1]),l(t,"viewBox",e[3])},m(e,s){o(e,t,s),a(t,n)},p(e,[s]){4&s&&l(n,"fill",e[2]),1&s&&l(t,"width",e[0]),2&s&&l(t,"height",e[1]),8&s&&l(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function pe(e,t,n){let{size:s="1em"}=t,{width:i=s}=t,{height:l=s}=t,{color:o="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,s=e.size),"width"in e&&n(0,i=e.width),"height"in e&&n(1,l=e.height),"color"in e&&n(2,o=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[i,l,o,a,s]}class xe extends t{constructor(e){super(),n(this,e,pe,he,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function we(e){let t,n;return{c(){t=i("svg"),n=i("path"),l(n,"d","M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z"),l(n,"fill",e[2]),l(t,"width",e[0]),l(t,"height",e[1]),l(t,"viewBox",e[3])},m(e,s){o(e,t,s),a(t,n)},p(e,[s]){4&s&&l(n,"fill",e[2]),1&s&&l(t,"width",e[0]),2&s&&l(t,"height",e[1]),8&s&&l(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function ve(e,t,n){let{size:s="1em"}=t,{width:i=s}=t,{height:l=s}=t,{color:o="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,s=e.size),"width"in e&&n(0,i=e.width),"height"in e&&n(1,l=e.height),"color"in e&&n(2,o=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[i,l,o,a,s]}class be extends t{constructor(e){super(),n(this,e,ve,we,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function Be(e){let t,n;return{c(){t=i("svg"),n=i("path"),l(n,"d","M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"),l(n,"fill",e[2]),l(t,"width",e[0]),l(t,"height",e[1]),l(t,"viewBox",e[3])},m(e,s){o(e,t,s),a(t,n)},p(e,[s]){4&s&&l(n,"fill",e[2]),1&s&&l(t,"width",e[0]),2&s&&l(t,"height",e[1]),8&s&&l(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function Le(e,t,n){let{size:s="1em"}=t,{width:i=s}=t,{height:l=s}=t,{color:o="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,s=e.size),"width"in e&&n(0,i=e.width),"height"in e&&n(1,l=e.height),"color"in e&&n(2,o=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[i,l,o,a,s]}class ye extends t{constructor(e){super(),n(this,e,Le,Be,s,{size:4,width:0,height:1,color:2,viewBox:3})}}const ze=(e,t)=>{const n=new Date,s=new Date(e);return n.getFullYear()!==s.getFullYear()?`${t.months[s.getMonth()]} ${s.getFullYear()}`:n.getMonth()!==s.getMonth()?`${s.getDate()} ${t.months[s.getMonth()]}`:n.getDate()!==s.getDate()?`${t.weekDays[s.getDay()]} ${s.getDate()}`:`${s.getHours()}:${i=s.getMinutes(),i.toString().padStart(2,"0")}`;var i};function ke(e){let t;const n=new be({});return{c(){u(n.$$.fragment)},m(e,s){p(n,e,s),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function Me(e){let t;const n=new ye({});return{c(){u(n.$$.fragment)},m(e,s){p(n,e,s),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function He(e){let t;const n=new fe({});return{c(){u(n.$$.fragment)},m(e,s){p(n,e,s),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function Ae(e){let t;const n=new xe({});return{c(){u(n.$$.fragment)},m(e,s){p(n,e,s),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function Ve(e){let t,n=(e[7].from.name||e[7].from.address||"")+"";return{c(){t=g(n)},m(e,n){o(e,t,n)},p(e,s){128&s&&n!==(n=(e[7].from.name||e[7].from.address||"")+"")&&k(t,n)},d(e){e&&c(t)}}}function Ce(e){let t,n,s,i,r=e[2].mailboxMessage.to+"",d=(e[7].to||[]).map(je).filter(Boolean).join(", ")+"";return{c(){t=m("span"),n=g(r),s=$(),i=g(d),l(t,"class","for")},m(e,l){o(e,t,l),a(t,n),a(t,s),o(e,i,l)},p(e,t){4&t&&r!==(r=e[2].mailboxMessage.to+"")&&k(n,r),128&t&&d!==(d=(e[7].to||[]).map(je).filter(Boolean).join(", ")+"")&&k(i,d)},d(e){e&&c(t),e&&c(i)}}}function De(e){let t,n,s,i,r,H,A,V,C,D,j,S,Z,_,T,F,U,Y,N,P,R,E,I,q,G,J,K=(e[7].subject||"")+"",O=(e[7].intro||"")+"",Q=(e[7].date&&ze(e[7].date,e[2]))+"";const W=[Me,ke],X=[];function ee(e,t){return e[5]?0:1}s=ee(e),i=X[s]=W[s](e);const te=new d({}),ne=[Ae,He],se=[];function ie(e,t){return e[7].flagged?0:1}V=ie(e),C=se[V]=ne[V](e);const le=new d({});function oe(e,t){return e[4]||e[3]?Ce:Ve}let ae=oe(e),re=ae(e);return{c(){t=m("a"),n=m("x-cell"),i.c(),r=$(),u(te.$$.fragment),H=$(),A=m("x-cell"),C.c(),D=$(),u(le.$$.fragment),j=$(),S=m("x-cell-group"),Z=m("x-cell"),re.c(),_=$(),T=m("x-cell"),F=m("span"),U=g(K),Y=$(),N=m("span"),P=g(O),R=$(),E=m("x-cell"),I=g(Q),f(n,"class","btn-dark icon cell-selected svelte-2l64lx"),f(A,"class","btn-dark icon svelte-2l64lx"),h(A,"flagged",e[7].flagged),f(Z,"class","from svelte-2l64lx"),l(F,"class","subject"),l(N,"class","intro svelte-2l64lx"),f(T,"class","subject-intro svelte-2l64lx"),f(E,"class","date svelte-2l64lx"),f(S,"class","from-subject-date svelte-2l64lx"),l(t,"href",q="#!/mailbox/"+e[6].id+"/message/"+e[7].id),l(t,"class","na message svelte-2l64lx"),h(t,"selected",e[5]),h(t,"unseen",!e[7].seen)},m(i,l,c){o(i,t,l),a(t,n),X[s].m(n,null),a(n,r),p(te,n,null),a(t,H),a(t,A),se[V].m(A,null),a(A,D),p(le,A,null),a(t,j),a(t,S),a(S,Z),re.m(Z,null),a(S,_),a(S,T),a(T,F),a(F,U),a(T,Y),a(T,N),a(N,P),a(S,R),a(S,E),a(E,I),G=!0,c&&x(J),J=[w(n,"click",v(b(e[19]))),w(A,"click",v(b(e[10]))),w(t,"click",e[11])]},p(e,[o]){let a=s;s=ee(e),s!==a&&(B(),L(X[a],1,1,()=>{X[a]=null}),y(),i=X[s],i||(i=X[s]=W[s](e),i.c()),z(i,1),i.m(n,r));let c=V;V=ie(e),V!==c&&(B(),L(se[c],1,1,()=>{se[c]=null}),y(),C=se[V],C||(C=se[V]=ne[V](e),C.c()),z(C,1),C.m(A,D)),128&o&&h(A,"flagged",e[7].flagged),ae===(ae=oe(e))&&re?re.p(e,o):(re.d(1),re=ae(e),re&&(re.c(),re.m(Z,null))),(!G||128&o)&&K!==(K=(e[7].subject||"")+"")&&k(U,K),(!G||128&o)&&O!==(O=(e[7].intro||"")+"")&&k(P,O),(!G||132&o)&&Q!==(Q=(e[7].date&&ze(e[7].date,e[2]))+"")&&k(I,Q),(!G||192&o&&q!==(q="#!/mailbox/"+e[6].id+"/message/"+e[7].id))&&l(t,"href",q),32&o&&h(t,"selected",e[5]),128&o&&h(t,"unseen",!e[7].seen)},i(e){G||(z(i),z(te.$$.fragment,e),z(C),z(le.$$.fragment,e),G=!0)},o(e){L(i),L(te.$$.fragment,e),L(C),L(le.$$.fragment,e),G=!1},d(e){e&&c(t),X[s].d(),M(te),se[V].d(),M(le),re.d(),x(J)}}}const je=e=>e.name||e.address;function Se(t,n,s){let i,l,o,a,c=r,d=()=>(c(),c=V(B,e=>s(6,l=e)),B),m=r,$=()=>(m(),m=V(x,e=>s(7,o=e)),x);t.$$.on_destroy.push(()=>c()),t.$$.on_destroy.push(()=>m());const u=H("mailbox-selection"),{isSelected:g,add:f,remove:h,toggle:p}=u;A(t,g,e=>s(14,i=e));let{message:x}=n;$();let w,v,b,{mailbox:B}=n;d();let L;C(()=>L&&L());const{locale:y}=H("app");A(t,y,e=>s(15,a=e));let{locale:z=a}=n;return t.$set=e=>{"message"in e&&$(s(0,x=e.message)),"mailbox"in e&&d(s(1,B=e.mailbox)),"locale"in e&&s(2,z=e.locale)},t.$$.update=()=>{2&t.$$.dirty&&s(3,w=B===D),2&t.$$.dirty&&s(4,v=B===j),16385&t.$$.dirty&&s(5,b=i(x))},[x,B,z,w,v,b,l,o,g,p,e=>{S(l.id,[o.id],!o.flagged),x.update(e=>({...e,flagged:!e.flagged}))},async t=>{if(w){t.preventDefault(),o.seen||x.update(e=>({...e,seen:!0}));const n=await Z(o.id),s=e(n);L=s.subscribe(e=>{x.update(t=>({...t,...e}))}),_(s)}},y,L,i,a,u,f,h,()=>p(x)]}class Ze extends t{constructor(e){super(),n(this,e,Se,De,s,{message:0,mailbox:1,locale:2})}}function _e(e){let t,n;return{c(){t=i("svg"),n=i("path"),l(n,"d","M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"),l(n,"fill",e[2]),l(t,"width",e[0]),l(t,"height",e[1]),l(t,"viewBox",e[3])},m(e,s){o(e,t,s),a(t,n)},p(e,[s]){4&s&&l(n,"fill",e[2]),1&s&&l(t,"width",e[0]),2&s&&l(t,"height",e[1]),8&s&&l(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function Te(e,t,n){let{size:s="1em"}=t,{width:i=s}=t,{height:l=s}=t,{color:o="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,s=e.size),"width"in e&&n(0,i=e.width),"height"in e&&n(1,l=e.height),"color"in e&&n(2,o=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[i,l,o,a,s]}class Fe extends t{constructor(e){super(),n(this,e,Te,_e,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function Ue(e){let t,n;return{c(){t=i("svg"),n=i("path"),l(n,"d","M19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M19,19H5V5H19V19M17,17H7V7H17V17Z"),l(n,"fill",e[2]),l(t,"width",e[0]),l(t,"height",e[1]),l(t,"viewBox",e[3])},m(e,s){o(e,t,s),a(t,n)},p(e,[s]){4&s&&l(n,"fill",e[2]),1&s&&l(t,"width",e[0]),2&s&&l(t,"height",e[1]),8&s&&l(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function Ye(e,t,n){let{size:s="1em"}=t,{width:i=s}=t,{height:l=s}=t,{color:o="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,s=e.size),"width"in e&&n(0,i=e.width),"height"in e&&n(1,l=e.height),"color"in e&&n(2,o=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[i,l,o,a,s]}class Ne extends t{constructor(e){super(),n(this,e,Ye,Ue,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function Pe(e){let t,n;return{c(){t=i("svg"),n=i("path"),l(n,"d","M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"),l(n,"fill",e[2]),l(t,"width",e[0]),l(t,"height",e[1]),l(t,"viewBox",e[3])},m(e,s){o(e,t,s),a(t,n)},p(e,[s]){4&s&&l(n,"fill",e[2]),1&s&&l(t,"width",e[0]),2&s&&l(t,"height",e[1]),8&s&&l(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function Re(e,t,n){let{size:s="1em"}=t,{width:i=s}=t,{height:l=s}=t,{color:o="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,s=e.size),"width"in e&&n(0,i=e.width),"height"in e&&n(1,l=e.height),"color"in e&&n(2,o=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[i,l,o,a,s]}class Ee extends t{constructor(e){super(),n(this,e,Re,Pe,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function Ie(e){let t,n;return{c(){t=i("svg"),n=i("path"),l(n,"d","M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"),l(n,"fill",e[2]),l(t,"width",e[0]),l(t,"height",e[1]),l(t,"viewBox",e[3])},m(e,s){o(e,t,s),a(t,n)},p(e,[s]){4&s&&l(n,"fill",e[2]),1&s&&l(t,"width",e[0]),2&s&&l(t,"height",e[1]),8&s&&l(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function qe(e,t,n){let{size:s="1em"}=t,{width:i=s}=t,{height:l=s}=t,{color:o="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,s=e.size),"width"in e&&n(0,i=e.width),"height"in e&&n(1,l=e.height),"color"in e&&n(2,o=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[i,l,o,a,s]}class Ge extends t{constructor(e){super(),n(this,e,qe,Ie,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function Je(e,t,n){const s=e.slice();return s[39]=t[n],s}function Ke(e){let t;const n=new Ne({});return{c(){u(n.$$.fragment)},m(e,s){p(n,e,s),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function Oe(e){let t;const n=new ye({});return{c(){u(n.$$.fragment)},m(e,s){p(n,e,s),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function Qe(e){let t;const n=new be({});return{c(){u(n.$$.fragment)},m(e,s){p(n,e,s),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function We(e){let t,n,s,i,r,h,x,v,b,H,A,V,C,D,j,S,Z,_,T,F,U,Y,P=e[18]("selection.title",{n:e[13].length})+"";const R=[et,Xe],E=[];function I(e,t){return 8192&t[0]&&(s=!!e[13].every($t)),s?0:1}i=I(e,[-1]),r=E[i]=R[i](e);const q=[nt,tt],G=[];function J(e,t){return e[6]?0:e[8]||e[9]||e[7]?-1:1}~(x=J(e))&&(v=G[x]=q[x](e));const K=new se({}),O=new d({}),Q=new ce({props:{mailbox:e[0],selection:e[3]}});Q.$on("moved",e[20]);const ee=new Ee({});return{c(){t=m("div"),n=m("x-action-group"),r.c(),h=$(),v&&v.c(),b=$(),H=m("x-action"),u(K.$$.fragment),A=$(),u(O.$$.fragment),C=$(),D=m("x-action-group"),u(Q.$$.fragment),j=$(),S=m("x-selection-info"),u(ee.$$.fragment),Z=$(),_=m("span"),T=g(P),f(H,"class","btn-dark"),f(H,"data-tooltip",V=e[7]?e[5].actions.deletePermanently:e[8]?e[5].actions.discardDrafts:e[5].actions.delete),l(_,"class","svelte-1r6iio1"),f(S,"class","svelte-1r6iio1"),l(t,"class","only-when-selection svelte-1r6iio1")},m(s,l,r){o(s,t,l),a(t,n),E[i].m(n,null),a(n,h),~x&&G[x].m(n,null),a(n,b),a(n,H),p(K,H,null),a(H,A),p(O,H,null),a(t,C),a(t,D),p(Q,D,null),a(t,j),a(t,S),p(ee,S,null),a(S,Z),a(S,_),a(_,T),U=!0,r&&Y(),Y=w(H,"click",e[37])},p(e,t){let s=i;i=I(e,t),i===s?E[i].p(e,t):(B(),L(E[s],1,1,()=>{E[s]=null}),y(),r=E[i],r||(r=E[i]=R[i](e),r.c()),z(r,1),r.m(n,h));let l=x;x=J(e),x===l?~x&&G[x].p(e,t):(v&&(B(),L(G[l],1,1,()=>{G[l]=null}),y()),~x?(v=G[x],v||(v=G[x]=q[x](e),v.c()),z(v,1),v.m(n,b)):v=null),(!U||416&t[0]&&V!==(V=e[7]?e[5].actions.deletePermanently:e[8]?e[5].actions.discardDrafts:e[5].actions.delete))&&f(H,"data-tooltip",V);const o={};1&t[0]&&(o.mailbox=e[0]),8&t[0]&&(o.selection=e[3]),Q.$set(o),(!U||270336&t[0])&&P!==(P=e[18]("selection.title",{n:e[13].length})+"")&&k(T,P)},i(e){U||(z(r),z(v),z(K.$$.fragment,e),z(O.$$.fragment,e),z(Q.$$.fragment,e),z(ee.$$.fragment,e),e&&N(()=>{F||(F=W(t,X,{duration:150},!0)),F.run(1)}),U=!0)},o(e){L(r),L(v),L(K.$$.fragment,e),L(O.$$.fragment,e),L(Q.$$.fragment,e),L(ee.$$.fragment,e),e&&(F||(F=W(t,X,{duration:150},!1)),F.run(0)),U=!1},d(e){e&&c(t),E[i].d(),~x&&G[x].d(),M(K),M(O),M(Q),M(ee),e&&F&&F.end(),Y()}}}function Xe(e){let t,n,s,i,l;const r=new de({}),g=new d({});return{c(){t=m("x-action"),u(r.$$.fragment),n=$(),u(g.$$.fragment),f(t,"class","btn-dark"),f(t,"data-tooltip",s=e[5].actions.markAsUnread)},m(s,c,d){o(s,t,c),p(r,t,null),a(t,n),p(g,t,null),i=!0,d&&l(),l=w(t,"click",e[34])},p(e,n){(!i||32&n[0]&&s!==(s=e[5].actions.markAsUnread))&&f(t,"data-tooltip",s)},i(e){i||(z(r.$$.fragment,e),z(g.$$.fragment,e),i=!0)},o(e){L(r.$$.fragment,e),L(g.$$.fragment,e),i=!1},d(e){e&&c(t),M(r),M(g),l()}}}function et(e){let t,n,s,i,l;const r=new me({}),g=new d({});return{c(){t=m("x-action"),u(r.$$.fragment),n=$(),u(g.$$.fragment),f(t,"class","btn-dark"),f(t,"data-tooltip",s=e[5].actions.markAsRead)},m(s,c,d){o(s,t,c),p(r,t,null),a(t,n),p(g,t,null),i=!0,d&&l(),l=w(t,"click",e[33])},p(e,n){(!i||32&n[0]&&s!==(s=e[5].actions.markAsRead))&&f(t,"data-tooltip",s)},i(e){i||(z(r.$$.fragment,e),z(g.$$.fragment,e),i=!0)},o(e){L(r.$$.fragment,e),L(g.$$.fragment,e),i=!1},d(e){e&&c(t),M(r),M(g),l()}}}function tt(e){let t,n,s,i,l;const r=new ie({}),g=new d({});return{c(){t=m("x-action"),u(r.$$.fragment),n=$(),u(g.$$.fragment),f(t,"class","btn-dark"),f(t,"data-tooltip",s=e[5].actions.markAsSpam)},m(s,c,d){o(s,t,c),p(r,t,null),a(t,n),p(g,t,null),i=!0,d&&l(),l=w(t,"click",e[36])},p(e,n){(!i||32&n[0]&&s!==(s=e[5].actions.markAsSpam))&&f(t,"data-tooltip",s)},i(e){i||(z(r.$$.fragment,e),z(g.$$.fragment,e),i=!0)},o(e){L(r.$$.fragment,e),L(g.$$.fragment,e),i=!1},d(e){e&&c(t),M(r),M(g),l()}}}function nt(e){let t,n,s,i,l;const r=new $e({}),g=new d({});return{c(){t=m("x-action"),u(r.$$.fragment),n=$(),u(g.$$.fragment),f(t,"class","btn-dark"),f(t,"data-tooltip",s=e[5].actions.unMarkAsSpam)},m(s,c,d){o(s,t,c),p(r,t,null),a(t,n),p(g,t,null),i=!0,d&&l(),l=w(t,"click",e[35])},p(e,n){(!i||32&n[0]&&s!==(s=e[5].actions.unMarkAsSpam))&&f(t,"data-tooltip",s)},i(e){i||(z(r.$$.fragment,e),z(g.$$.fragment,e),i=!0)},o(e){L(r.$$.fragment,e),L(g.$$.fragment,e),i=!1},d(e){e&&c(t),M(r),M(g),l()}}}function st(e){let t,n,s,i,l,r,g,h,v,b,k,H,A,V,C;const D=new d({}),j=[Qe,Oe,Ke],S=[];function Z(e,t){return 0===e[13].length?0:e[13].length===e[14].length?1:2}i=Z(e),l=S[i]=j[i](e);const _=new Fe({}),T=new d({});let F=0!==e[13].length&&We(e);return{c(){t=m("x-action-group"),n=m("x-action"),u(D.$$.fragment),s=$(),l.c(),g=$(),h=m("x-action"),v=m("div"),u(_.$$.fragment),b=$(),u(T.$$.fragment),H=$(),F&&F.c(),A=E(),f(n,"class","btn-dark"),f(n,"data-tooltip",r=e[5].actions.select),ee(v,"display","flex"),ee(v,"transition","transform 300ms ease"),ee(v,"transform","rotate("+360*e[10]+"deg)"),f(h,"class","btn-dark reload"),f(h,"data-tooltip",k=e[5].actions.reload),f(t,"class","select svelte-1r6iio1")},m(l,r,c){o(l,t,r),a(t,n),p(D,n,null),a(n,s),S[i].m(n,null),a(t,g),a(t,h),a(h,v),p(_,v,null),a(h,b),p(T,h,null),o(l,H,r),F&&F.m(l,r),o(l,A,r),V=!0,c&&x(C),C=[w(n,"click",e[19]),w(h,"click",e[24])]},p(e,t){let s=i;i=Z(e),i!==s&&(B(),L(S[s],1,1,()=>{S[s]=null}),y(),l=S[i],l||(l=S[i]=j[i](e),l.c()),z(l,1),l.m(n,null)),(!V||32&t[0]&&r!==(r=e[5].actions.select))&&f(n,"data-tooltip",r),(!V||1024&t[0])&&ee(v,"transform","rotate("+360*e[10]+"deg)"),(!V||32&t[0]&&k!==(k=e[5].actions.reload))&&f(h,"data-tooltip",k),0!==e[13].length?F?(F.p(e,t),8192&t[0]&&z(F,1)):(F=We(e),F.c(),z(F,1),F.m(A.parentNode,A)):F&&(B(),L(F,1,1,()=>{F=null}),y())},i(e){V||(z(D.$$.fragment,e),z(l),z(_.$$.fragment,e),z(T.$$.fragment,e),z(F),V=!0)},o(e){L(D.$$.fragment,e),L(l),L(_.$$.fragment,e),L(T.$$.fragment,e),L(F),V=!1},d(e){e&&c(t),M(D),S[i].d(),M(_),M(T),e&&c(H),F&&F.d(e),e&&c(A),x(C)}}}function it(e){let t,n=!e[11]&&lt(e);return{c(){n&&n.c(),t=E()},m(e,s){n&&n.m(e,s),o(e,t,s)},p(e,s){e[11]?n&&(n.d(1),n=null):n?n.p(e,s):(n=lt(e),n.c(),n.m(t.parentNode,t))},d(e){n&&n.d(e),e&&c(t)}}}function lt(e){let t,n,s,i=e[5].mailbox.empty+"";return{c(){t=m("x-mailbox-empty"),n=m("span"),s=g(i),l(n,"class","label svelte-1r6iio1"),f(t,"class","svelte-1r6iio1")},m(e,i){o(e,t,i),a(t,n),a(n,s)},p(e,t){32&t[0]&&i!==(i=e[5].mailbox.empty+"")&&k(s,i)},d(e){e&&c(t)}}}function ot(e,t){let n,s,i,l;const a=new Ze({props:{message:t[39],mailbox:t[0]}});return{key:e,first:null,c(){n=m("x-mailbox-message"),u(a.$$.fragment),f(n,"class","svelte-1r6iio1"),this.first=n},m(e,t){o(e,n,t),p(a,n,null),l=!0},p(e,t){const n={};16384&t[0]&&(n.message=e[39]),1&t[0]&&(n.mailbox=e[0]),a.$set(n)},i(e){l||(z(a.$$.fragment,e),e&&N(()=>{i&&i.end(1),s||(s=P(n,t[26],{duration:150})),s.start()}),l=!0)},o(e){L(a.$$.fragment,e),s&&s.invalidate(),e&&(i=R(n,t[27],{})),l=!1},d(e){e&&c(n),M(a),e&&i&&i.end()}}}function at(e){let t,n,s,i;const l=[ct,rt],a=[];function r(e,t){return e[11]?0:e[16]?1:-1}return~(n=r(e))&&(s=a[n]=l[n](e)),{c(){t=m("x-loadmore"),s&&s.c(),f(t,"class","svelte-1r6iio1")},m(e,s){o(e,t,s),~n&&a[n].m(t,null),i=!0},p(e,i){let o=n;n=r(e),n===o?~n&&a[n].p(e,i):(s&&(B(),L(a[o],1,1,()=>{a[o]=null}),y()),~n?(s=a[n],s||(s=a[n]=l[n](e),s.c()),z(s,1),s.m(t,null)):s=null)},i(e){i||(z(s),i=!0)},o(e){L(s),i=!1},d(e){e&&c(t),~n&&a[n].d()}}}function rt(e){let t,n,s,i,l;const g=new Ge({}),h=new d({});return{c(){t=m("x-loadmore-button"),u(g.$$.fragment),n=$(),u(h.$$.fragment),f(t,"class","btn-dark svelte-1r6iio1")},m(s,r,c){o(s,t,r),p(g,t,null),a(t,n),p(h,t,null),i=!0,c&&l(),l=w(t,"click",e[25])},p:r,i(e){i||(z(g.$$.fragment,e),z(h.$$.fragment,e),e&&(s||N(()=>{s=P(t,X,{delay:150,duration:150}),s.start()})),i=!0)},o(e){L(g.$$.fragment,e),L(h.$$.fragment,e),i=!1},d(e){e&&c(t),M(g),M(h),l()}}}function ct(e){let t,n,s;const i=new te({props:{size:"0.75em"}});return{c(){t=m("x-loadmore-loading"),u(i.$$.fragment),f(t,"class","svelte-1r6iio1")},m(e,n){o(e,t,n),p(i,t,null),s=!0},p:r,i(e){s||(z(i.$$.fragment,e),e&&(n||N(()=>{n=P(t,X,{delay:150,duration:150}),n.start()})),s=!0)},o(e){L(i.$$.fragment,e),s=!1},d(e){e&&c(t),M(i)}}}function dt(e){let t,n,s,i,l,r=[],d=new Map;const g=new re({props:{scrolled:0!==e[17],$$slots:{default:[st]},$$scope:{ctx:e}}});let h=e[14];const x=e=>`${e[15].id}-${e[39].get().id}`;for(let t=0;t<h.length;t+=1){let n=Je(e,h,t),s=x(n);d.set(s,r[t]=ot(s,n))}let v=null;h.length||(v=it(e));let b=(e[11]||e[16])&&at(e);return{c(){u(g.$$.fragment),t=$(),n=m("x-tab-content");for(let e=0;e<r.length;e+=1)r[e].c();v&&v.c(),s=$(),b&&b.c(),f(n,"class","svelte-1r6iio1")},m(c,d,m){p(g,c,d),o(c,t,d),o(c,n,d);for(let e=0;e<r.length;e+=1)r[e].m(n,null);v&&v.m(n,null),a(n,s),b&&b.m(n,null),i=!0,m&&l(),l=w(n,"scroll",e[38])},p(e,t){const i={};if(131072&t[0]&&(i.scrolled=0!==e[17]),288745&t[0]|2048&t[1]&&(i.$$scope={dirty:t,ctx:e}),g.$set(i),18465&t[0]){const i=e[14];B(),r=I(r,t,x,1,e,i,d,n,ne,ot,s,Je),y(),!i.length&&v?v.p(e,t):i.length?v&&(v.d(1),v=null):(v=it(e),v.c(),v.m(n,s))}e[11]||e[16]?b?(b.p(e,t),67584&t[0]&&z(b,1)):(b=at(e),b.c(),z(b,1),b.m(n,null)):b&&(B(),L(b,1,1,()=>{b=null}),y())},i(e){if(!i){z(g.$$.fragment,e);for(let e=0;e<h.length;e+=1)z(r[e]);z(b),i=!0}},o(e){L(g.$$.fragment,e);for(let e=0;e<r.length;e+=1)L(r[e]);L(b),i=!1},d(e){M(g,e),e&&c(t),e&&c(n);for(let e=0;e<r.length;e+=1)r[e].d();v&&v.d(),b&&b.d(),l()}}}function mt(e){let t,n,s;document.title=t=(e[15].unseen?`(${e[15].unseen}) `:"")+e[12].label;const i=new ae({props:{$$slots:{default:[dt]},$$scope:{ctx:e}}});return{c(){n=$(),u(i.$$.fragment)},m(e,t){o(e,n,t),p(i,e,t),s=!0},p(e,n){(!s||36864&n[0])&&t!==(t=(e[15].unseen?`(${e[15].unseen}) `:"")+e[12].label)&&(document.title=t);const l={};487401&n[0]|2048&n[1]&&(l.$$scope={dirty:n,ctx:e}),i.$set(l)},i(e){s||(z(i.$$.fragment,e),s=!0)},o(e){L(i.$$.fragment,e),s=!1},d(e){e&&c(n),M(i,e)}}}const $t=e=>!e.get().seen;function ut(t,n,s){let i,l,o,a,c,d,m,$=r,u=()=>($(),$=V(k,e=>s(13,i=e)),k),g=r,f=()=>(g(),g=V(L,e=>s(14,l=e)),L),h=r,p=()=>(h(),h=V(B,e=>s(15,o=e)),B),x=r,w=()=>(x(),x=V(y,e=>s(16,a=e)),y),v=r,b=()=>(v(),v=V(_,e=>s(17,d=e)),_);t.$$.on_destroy.push(()=>$()),t.$$.on_destroy.push(()=>g()),t.$$.on_destroy.push(()=>h()),t.$$.on_destroy.push(()=>x()),t.$$.on_destroy.push(()=>v());let{mailbox:B}=n;p();let{messages:L}=n;f();let{next:y}=n;w();let{prev:z}=n,{selection:k}=n;u();let M,C,S,Z,{scroll:_}=n;b(),T("mailbox-selection",k);const N=()=>{const e=k.get();L.update(t=>t.filter(t=>!e.includes(t))),k.clear(),L.get().length<10&&ee()},P=async e=>{i.length&&(i.forEach(t=>t.update(t=>({...t,seen:e}))),k.invalidate(),await q(o.id,i.map(e=>e.get().id),e))},R=async e=>{G(o.id,i.map(e=>e.get().id),e),N()},E=async()=>{J(o.id,i.map(e=>e.get().id)),N()};let I=!1,W=0;let X=!1;const ee=async()=>{if(!a)return;s(11,X=!0);const t=await O(o.id,a);L.update(n=>[...n,...t.messages.map(t=>e(t))]),y.set(t.next),z.set(t.prev),s(11,X=!1)},{locale:te,trans:ne}=H("app");A(t,te,e=>s(32,c=e)),A(t,ne,e=>s(18,m=e));let se,{locale:ie=c}=n;return t.$set=e=>{"mailbox"in e&&p(s(0,B=e.mailbox)),"messages"in e&&f(s(1,L=e.messages)),"next"in e&&w(s(2,y=e.next)),"prev"in e&&s(30,z=e.prev),"selection"in e&&u(s(3,k=e.selection)),"scroll"in e&&b(s(4,_=e.scroll)),"locale"in e&&s(5,ie=e.locale)},t.$$.update=()=>{1&t.$$.dirty[0]&&s(6,M=B===F),1&t.$$.dirty[0]&&s(7,C=B===U),1&t.$$.dirty[0]&&s(8,S=B===D),1&t.$$.dirty[0]&&s(9,Z=B===j),32800&t.$$.dirty[0]&&s(12,se=Y(o,ie.mailbox.title))},[B,L,y,k,_,ie,M,C,S,Z,W,X,se,i,l,o,a,d,m,()=>{k.update(e=>i.length!==l.length?l.slice():[])},N,P,R,E,async()=>{if(I)return;s(10,W++,W),I=!0;const t=await K(o.id);L.set(t.messages.map(t=>e(t))),z.set(t.prev),y.set(t.next),k.clear(),I=!1},ee,(e,t)=>(e.classList.add("removed"),e.style.zIndex="1",setTimeout(()=>e.classList.remove("removed"),1),setTimeout(()=>e.style.zIndex=null,150),{duration:150}),e=>(e.classList.add("removed"),{duration:150}),te,ne,z,I,c,()=>P(!0),()=>P(!1),()=>R(!1),()=>R(!0),()=>E(),e=>Q(_,d=e.target.scrollTop)]}class gt extends t{constructor(e){super(),n(this,e,ut,mt,s,{mailbox:0,messages:1,next:2,prev:30,selection:3,scroll:4,locale:5},[-1,-1])}}function ft(e){let t;const n=new gt({props:{mailbox:e[0],messages:e[1],prev:e[2],next:e[3],selection:e[4],scroll:e[5]}});return{c(){u(n.$$.fragment)},m(e,s){p(n,e,s),t=!0},p(e,[t]){const s={};1&t&&(s.mailbox=e[0]),2&t&&(s.messages=e[1]),4&t&&(s.prev=e[2]),8&t&&(s.next=e[3]),16&t&&(s.selection=e[4]),32&t&&(s.scroll=e[5]),n.$set(s)},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}async function ht(t,{client:n}){if(!le.get())return this.redirect("#!/login");const s=oe(t.params.mailbox);if(null==s)return this.error({code:404,message:"La pÃ¡gina no existe"});{const n=await K(t.params.mailbox),i=e(n.messages.map(t=>e(t))),l=e(n.next);return{mailbox:s,messages:i,prev:e(n.prev),next:l,selection:((t=[])=>{const n=e(t),s=(...e)=>{const t=n.get().slice();for(const s of e)t.includes(s)||t.push(s),n.set(t)},i=(...e)=>n.update(t=>t.filter(t=>!e.includes(t))),l=e=>n.get().includes(e),o=e(l);return n.subscribe(o.invalidate),{...n,clear:()=>n.set([]),add:s,remove:i,toggle:e=>{l(e)?i(e):s(e)},isSelected:o}})(),scroll:e(0)}}}function pt(e,t,n){let{mailbox:s}=t,{messages:i}=t,{prev:l}=t,{next:o}=t,{selection:a}=t,{scroll:r}=t;return e.$set=e=>{"mailbox"in e&&n(0,s=e.mailbox),"messages"in e&&n(1,i=e.messages),"prev"in e&&n(2,l=e.prev),"next"in e&&n(3,o=e.next),"selection"in e&&n(4,a=e.selection),"scroll"in e&&n(5,r=e.scroll)},[s,i,l,o,a,r]}export default class extends t{constructor(e){super(),n(this,e,pt,ft,s,{mailbox:0,messages:1,prev:2,next:3,selection:4,scroll:5})}}export{ht as preload};
//# sourceMappingURL=Mailbox-0b35e687.js.map
