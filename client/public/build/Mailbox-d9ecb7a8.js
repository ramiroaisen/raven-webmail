import{L as e,S as t,a as n,s,o as i,b as o,c as l,h as a,n as r,d as c,M as d,e as m,k as $,w as u,g,N as f,t as h,x as p,r as w,m as x,O as v,y as b,C as B,D as L,E as y,F as z,j as k,G as M,I as H,J as A,P as V,Q as C,R as D,T as j,U as S,V as Z,W as _,X as T,Y as F,Z as N,_ as U,$ as Y,a0 as I,a1 as P,l as R,a2 as E,a3 as G,a4 as J,a5 as O,a6 as Q,a7 as W,a8 as X,a9 as q,aa as K,ab as ee,ac as te,ad as ne,ae as se,af as ie,u as oe,ag as le}from"./main-26d30cbc.js";import{T as ae,a as re,M as ce,b as de,c as me,U as $e}from"./MoveTo-08e4aea5.js";function ue(e){let t,n;return{c(){t=i("svg"),n=i("path"),o(n,"d","M12,15.39L8.24,17.66L9.23,13.38L5.91,10.5L10.29,10.13L12,6.09L13.71,10.13L18.09,10.5L14.77,13.38L15.76,17.66M22,9.24L14.81,8.63L12,2L9.19,8.63L2,9.24L7.45,13.97L5.82,21L12,17.27L18.18,21L16.54,13.97L22,9.24Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,s){l(e,t,s),a(t,n)},p(e,[s]){4&s&&o(n,"fill",e[2]),1&s&&o(t,"width",e[0]),2&s&&o(t,"height",e[1]),8&s&&o(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function ge(e,t,n){let{size:s="1em"}=t,{width:i=s}=t,{height:o=s}=t,{color:l="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,s=e.size),"width"in e&&n(0,i=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[i,o,l,a,s]}class fe extends t{constructor(e){super(),n(this,e,ge,ue,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function he(e){let t,n;return{c(){t=i("svg"),n=i("path"),o(n,"d","M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,s){l(e,t,s),a(t,n)},p(e,[s]){4&s&&o(n,"fill",e[2]),1&s&&o(t,"width",e[0]),2&s&&o(t,"height",e[1]),8&s&&o(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function pe(e,t,n){let{size:s="1em"}=t,{width:i=s}=t,{height:o=s}=t,{color:l="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,s=e.size),"width"in e&&n(0,i=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[i,o,l,a,s]}class we extends t{constructor(e){super(),n(this,e,pe,he,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function xe(e){let t,n;return{c(){t=i("svg"),n=i("path"),o(n,"d","M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,s){l(e,t,s),a(t,n)},p(e,[s]){4&s&&o(n,"fill",e[2]),1&s&&o(t,"width",e[0]),2&s&&o(t,"height",e[1]),8&s&&o(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function ve(e,t,n){let{size:s="1em"}=t,{width:i=s}=t,{height:o=s}=t,{color:l="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,s=e.size),"width"in e&&n(0,i=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[i,o,l,a,s]}class be extends t{constructor(e){super(),n(this,e,ve,xe,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function Be(e){let t,n;return{c(){t=i("svg"),n=i("path"),o(n,"d","M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,s){l(e,t,s),a(t,n)},p(e,[s]){4&s&&o(n,"fill",e[2]),1&s&&o(t,"width",e[0]),2&s&&o(t,"height",e[1]),8&s&&o(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function Le(e,t,n){let{size:s="1em"}=t,{width:i=s}=t,{height:o=s}=t,{color:l="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,s=e.size),"width"in e&&n(0,i=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[i,o,l,a,s]}class ye extends t{constructor(e){super(),n(this,e,Le,Be,s,{size:4,width:0,height:1,color:2,viewBox:3})}}const ze=(e,t)=>{const n=new Date,s=new Date(e);return n.getFullYear()!==s.getFullYear()?`${t.months[s.getMonth()]} ${s.getFullYear()}`:n.getMonth()!==s.getMonth()?`${s.getDate()} ${t.months[s.getMonth()]}`:n.getDate()!==s.getDate()?`${t.weekDays[s.getDay()]} ${s.getDate()}`:`${s.getHours()}:${i=s.getMinutes(),i.toString().padStart(2,"0")}`;var i};function ke(e){let t;const n=new be({});return{c(){u(n.$$.fragment)},m(e,s){p(n,e,s),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function Me(e){let t;const n=new ye({});return{c(){u(n.$$.fragment)},m(e,s){p(n,e,s),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function He(e){let t;const n=new fe({});return{c(){u(n.$$.fragment)},m(e,s){p(n,e,s),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function Ae(e){let t;const n=new we({});return{c(){u(n.$$.fragment)},m(e,s){p(n,e,s),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function Ve(e){let t,n=(e[7].from.name||e[7].from.address||"")+"";return{c(){t=g(n)},m(e,n){l(e,t,n)},p(e,s){128&s&&n!==(n=(e[7].from.name||e[7].from.address||"")+"")&&k(t,n)},d(e){e&&c(t)}}}function Ce(e){let t,n,s,i,r=e[2].mailboxMessage.to+"",d=(e[7].to||[]).map(je).filter(Boolean).join(", ")+"";return{c(){t=m("span"),n=g(r),s=$(),i=g(d),o(t,"class","for")},m(e,o){l(e,t,o),a(t,n),a(t,s),l(e,i,o)},p(e,t){4&t&&r!==(r=e[2].mailboxMessage.to+"")&&k(n,r),128&t&&d!==(d=(e[7].to||[]).map(je).filter(Boolean).join(", ")+"")&&k(i,d)},d(e){e&&c(t),e&&c(i)}}}function De(e){let t,n,s,i,r,H,A,V,C,D,j,S,Z,_,T,F,N,U,Y,I,P,R,E,G,J,O,Q=(e[7].subject||"")+"",W=(e[7].intro||"")+"",X=(e[7].date&&ze(e[7].date,e[2]))+"";const q=[Me,ke],K=[];function ee(e,t){return e[5]?0:1}s=ee(e),i=K[s]=q[s](e);const te=new d({}),ne=[Ae,He],se=[];function ie(e,t){return e[7].flagged?0:1}V=ie(e),C=se[V]=ne[V](e);const oe=new d({});function le(e,t){return e[4]||e[3]?Ce:Ve}let ae=le(e),re=ae(e);return{c(){t=m("a"),n=m("x-cell"),i.c(),r=$(),u(te.$$.fragment),H=$(),A=m("x-cell"),C.c(),D=$(),u(oe.$$.fragment),j=$(),S=m("x-cell-group"),Z=m("x-cell"),re.c(),_=$(),T=m("x-cell"),F=m("span"),N=g(Q),U=$(),Y=m("span"),I=g(W),P=$(),R=m("x-cell"),E=g(X),f(n,"class","btn-dark icon cell-selected svelte-156re3c"),f(A,"class","btn-dark icon svelte-156re3c"),h(A,"flagged",e[7].flagged),f(Z,"class","from svelte-156re3c"),o(F,"class","subject"),o(Y,"class","intro svelte-156re3c"),f(T,"class","subject-intro svelte-156re3c"),f(R,"class","date svelte-156re3c"),f(S,"class","from-subject-date svelte-156re3c"),o(t,"href",G="#!/mailbox/"+e[6].id+"/message/"+e[7].id),o(t,"class","na message svelte-156re3c"),h(t,"selected",e[5]),h(t,"unseen",!e[7].seen)},m(i,o,c){l(i,t,o),a(t,n),K[s].m(n,null),a(n,r),p(te,n,null),a(t,H),a(t,A),se[V].m(A,null),a(A,D),p(oe,A,null),a(t,j),a(t,S),a(S,Z),re.m(Z,null),a(S,_),a(S,T),a(T,F),a(F,N),a(T,U),a(T,Y),a(Y,I),a(S,P),a(S,R),a(R,E),J=!0,c&&w(O),O=[x(n,"click",v(b(e[19]))),x(A,"click",v(b(e[10]))),x(t,"click",e[11])]},p(e,[l]){let a=s;s=ee(e),s!==a&&(B(),L(K[a],1,1,()=>{K[a]=null}),y(),i=K[s],i||(i=K[s]=q[s](e),i.c()),z(i,1),i.m(n,r));let c=V;V=ie(e),V!==c&&(B(),L(se[c],1,1,()=>{se[c]=null}),y(),C=se[V],C||(C=se[V]=ne[V](e),C.c()),z(C,1),C.m(A,D)),128&l&&h(A,"flagged",e[7].flagged),ae===(ae=le(e))&&re?re.p(e,l):(re.d(1),re=ae(e),re&&(re.c(),re.m(Z,null))),(!J||128&l)&&Q!==(Q=(e[7].subject||"")+"")&&k(N,Q),(!J||128&l)&&W!==(W=(e[7].intro||"")+"")&&k(I,W),(!J||132&l)&&X!==(X=(e[7].date&&ze(e[7].date,e[2]))+"")&&k(E,X),(!J||192&l&&G!==(G="#!/mailbox/"+e[6].id+"/message/"+e[7].id))&&o(t,"href",G),32&l&&h(t,"selected",e[5]),128&l&&h(t,"unseen",!e[7].seen)},i(e){J||(z(i),z(te.$$.fragment,e),z(C),z(oe.$$.fragment,e),J=!0)},o(e){L(i),L(te.$$.fragment,e),L(C),L(oe.$$.fragment,e),J=!1},d(e){e&&c(t),K[s].d(),M(te),se[V].d(),M(oe),re.d(),w(O)}}}const je=e=>e.name||e.address;function Se(t,n,s){let i,o,l,a,c=r,d=()=>(c(),c=V(B,e=>s(6,o=e)),B),m=r,$=()=>(m(),m=V(w,e=>s(7,l=e)),w);t.$$.on_destroy.push(()=>c()),t.$$.on_destroy.push(()=>m());const u=H("mailbox-selection"),{isSelected:g,add:f,remove:h,toggle:p}=u;A(t,g,e=>s(14,i=e));let{message:w}=n;$();let x,v,b,{mailbox:B}=n;d();let L;C(()=>L&&L());const{locale:y}=H("app");A(t,y,e=>s(15,a=e));let{locale:z=a}=n;return t.$set=e=>{"message"in e&&$(s(0,w=e.message)),"mailbox"in e&&d(s(1,B=e.mailbox)),"locale"in e&&s(2,z=e.locale)},t.$$.update=()=>{2&t.$$.dirty&&s(3,x=B===D),2&t.$$.dirty&&s(4,v=B===j),16385&t.$$.dirty&&s(5,b=i(w))},[w,B,z,x,v,b,o,l,g,p,e=>{S(o.id,[l.id],!l.flagged),w.update(e=>({...e,flagged:!e.flagged}))},async t=>{if(x){t.preventDefault(),l.seen||w.update(e=>({...e,seen:!0}));const n=await Z(l.id),s=e(n);L=s.subscribe(e=>{w.update(t=>({...t,...e}))}),_(s)}},y,L,i,a,u,f,h,()=>p(w)]}class Ze extends t{constructor(e){super(),n(this,e,Se,De,s,{message:0,mailbox:1,locale:2})}}function _e(e){let t,n;return{c(){t=i("svg"),n=i("path"),o(n,"d","M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,s){l(e,t,s),a(t,n)},p(e,[s]){4&s&&o(n,"fill",e[2]),1&s&&o(t,"width",e[0]),2&s&&o(t,"height",e[1]),8&s&&o(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function Te(e,t,n){let{size:s="1em"}=t,{width:i=s}=t,{height:o=s}=t,{color:l="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,s=e.size),"width"in e&&n(0,i=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[i,o,l,a,s]}class Fe extends t{constructor(e){super(),n(this,e,Te,_e,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function Ne(e){let t,n;return{c(){t=i("svg"),n=i("path"),o(n,"d","M19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M19,19H5V5H19V19M17,17H7V7H17V17Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,s){l(e,t,s),a(t,n)},p(e,[s]){4&s&&o(n,"fill",e[2]),1&s&&o(t,"width",e[0]),2&s&&o(t,"height",e[1]),8&s&&o(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function Ue(e,t,n){let{size:s="1em"}=t,{width:i=s}=t,{height:o=s}=t,{color:l="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,s=e.size),"width"in e&&n(0,i=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[i,o,l,a,s]}class Ye extends t{constructor(e){super(),n(this,e,Ue,Ne,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function Ie(e){let t,n;return{c(){t=i("svg"),n=i("path"),o(n,"d","M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,s){l(e,t,s),a(t,n)},p(e,[s]){4&s&&o(n,"fill",e[2]),1&s&&o(t,"width",e[0]),2&s&&o(t,"height",e[1]),8&s&&o(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function Pe(e,t,n){let{size:s="1em"}=t,{width:i=s}=t,{height:o=s}=t,{color:l="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,s=e.size),"width"in e&&n(0,i=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[i,o,l,a,s]}class Re extends t{constructor(e){super(),n(this,e,Pe,Ie,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function Ee(e){let t,n;return{c(){t=i("svg"),n=i("path"),o(n,"d","M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,s){l(e,t,s),a(t,n)},p(e,[s]){4&s&&o(n,"fill",e[2]),1&s&&o(t,"width",e[0]),2&s&&o(t,"height",e[1]),8&s&&o(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function Ge(e,t,n){let{size:s="1em"}=t,{width:i=s}=t,{height:o=s}=t,{color:l="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,s=e.size),"width"in e&&n(0,i=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[i,o,l,a,s]}class Je extends t{constructor(e){super(),n(this,e,Ge,Ee,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function Oe(e,t,n){const s=e.slice();return s[39]=t[n],s}function Qe(e){let t;const n=new Ye({});return{c(){u(n.$$.fragment)},m(e,s){p(n,e,s),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function We(e){let t;const n=new ye({});return{c(){u(n.$$.fragment)},m(e,s){p(n,e,s),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function Xe(e){let t;const n=new be({});return{c(){u(n.$$.fragment)},m(e,s){p(n,e,s),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function qe(e){let t,n,s,i,r,h,w,v,b,H,A,V,C,D,j,S,Z,_,T,F,N,U,I=e[18]("selection.title",{n:e[13].length})+"";const P=[et,Ke],R=[];function E(e,t){return 8192&t[0]&&(s=!!e[13].every($t)),s?0:1}i=E(e,[-1]),r=R[i]=P[i](e);const G=[nt,tt],J=[];function O(e,t){return e[6]?0:e[8]||e[9]||e[7]?-1:1}~(w=O(e))&&(v=J[w]=G[w](e));const Q=new se({}),W=new d({}),X=new ce({props:{mailbox:e[0],selection:e[3]}});X.$on("moved",e[20]);const ee=new Re({});return{c(){t=m("div"),n=m("x-action-group"),r.c(),h=$(),v&&v.c(),b=$(),H=m("x-action"),u(Q.$$.fragment),A=$(),u(W.$$.fragment),C=$(),D=m("x-action-group"),u(X.$$.fragment),j=$(),S=m("x-selection-info"),u(ee.$$.fragment),Z=$(),_=m("span"),T=g(I),f(H,"class","btn-dark"),f(H,"data-tooltip",V=e[7]?e[5].actions.deletePermanently:e[8]?e[5].actions.discardDrafts:e[5].actions.delete),o(_,"class","svelte-1r6iio1"),f(S,"class","svelte-1r6iio1"),o(t,"class","only-when-selection svelte-1r6iio1")},m(s,o,r){l(s,t,o),a(t,n),R[i].m(n,null),a(n,h),~w&&J[w].m(n,null),a(n,b),a(n,H),p(Q,H,null),a(H,A),p(W,H,null),a(t,C),a(t,D),p(X,D,null),a(t,j),a(t,S),p(ee,S,null),a(S,Z),a(S,_),a(_,T),N=!0,r&&U(),U=x(H,"click",e[37])},p(e,t){let s=i;i=E(e,t),i===s?R[i].p(e,t):(B(),L(R[s],1,1,()=>{R[s]=null}),y(),r=R[i],r||(r=R[i]=P[i](e),r.c()),z(r,1),r.m(n,h));let o=w;w=O(e),w===o?~w&&J[w].p(e,t):(v&&(B(),L(J[o],1,1,()=>{J[o]=null}),y()),~w?(v=J[w],v||(v=J[w]=G[w](e),v.c()),z(v,1),v.m(n,b)):v=null),(!N||416&t[0]&&V!==(V=e[7]?e[5].actions.deletePermanently:e[8]?e[5].actions.discardDrafts:e[5].actions.delete))&&f(H,"data-tooltip",V);const l={};1&t[0]&&(l.mailbox=e[0]),8&t[0]&&(l.selection=e[3]),X.$set(l),(!N||270336&t[0])&&I!==(I=e[18]("selection.title",{n:e[13].length})+"")&&k(T,I)},i(e){N||(z(r),z(v),z(Q.$$.fragment,e),z(W.$$.fragment,e),z(X.$$.fragment,e),z(ee.$$.fragment,e),e&&Y(()=>{F||(F=q(t,K,{duration:150},!0)),F.run(1)}),N=!0)},o(e){L(r),L(v),L(Q.$$.fragment,e),L(W.$$.fragment,e),L(X.$$.fragment,e),L(ee.$$.fragment,e),e&&(F||(F=q(t,K,{duration:150},!1)),F.run(0)),N=!1},d(e){e&&c(t),R[i].d(),~w&&J[w].d(),M(Q),M(W),M(X),M(ee),e&&F&&F.end(),U()}}}function Ke(e){let t,n,s,i,o;const r=new de({}),g=new d({});return{c(){t=m("x-action"),u(r.$$.fragment),n=$(),u(g.$$.fragment),f(t,"class","btn-dark"),f(t,"data-tooltip",s=e[5].actions.markAsUnread)},m(s,c,d){l(s,t,c),p(r,t,null),a(t,n),p(g,t,null),i=!0,d&&o(),o=x(t,"click",e[34])},p(e,n){(!i||32&n[0]&&s!==(s=e[5].actions.markAsUnread))&&f(t,"data-tooltip",s)},i(e){i||(z(r.$$.fragment,e),z(g.$$.fragment,e),i=!0)},o(e){L(r.$$.fragment,e),L(g.$$.fragment,e),i=!1},d(e){e&&c(t),M(r),M(g),o()}}}function et(e){let t,n,s,i,o;const r=new me({}),g=new d({});return{c(){t=m("x-action"),u(r.$$.fragment),n=$(),u(g.$$.fragment),f(t,"class","btn-dark"),f(t,"data-tooltip",s=e[5].actions.markAsRead)},m(s,c,d){l(s,t,c),p(r,t,null),a(t,n),p(g,t,null),i=!0,d&&o(),o=x(t,"click",e[33])},p(e,n){(!i||32&n[0]&&s!==(s=e[5].actions.markAsRead))&&f(t,"data-tooltip",s)},i(e){i||(z(r.$$.fragment,e),z(g.$$.fragment,e),i=!0)},o(e){L(r.$$.fragment,e),L(g.$$.fragment,e),i=!1},d(e){e&&c(t),M(r),M(g),o()}}}function tt(e){let t,n,s,i,o;const r=new ie({}),g=new d({});return{c(){t=m("x-action"),u(r.$$.fragment),n=$(),u(g.$$.fragment),f(t,"class","btn-dark"),f(t,"data-tooltip",s=e[5].actions.markAsSpam)},m(s,c,d){l(s,t,c),p(r,t,null),a(t,n),p(g,t,null),i=!0,d&&o(),o=x(t,"click",e[36])},p(e,n){(!i||32&n[0]&&s!==(s=e[5].actions.markAsSpam))&&f(t,"data-tooltip",s)},i(e){i||(z(r.$$.fragment,e),z(g.$$.fragment,e),i=!0)},o(e){L(r.$$.fragment,e),L(g.$$.fragment,e),i=!1},d(e){e&&c(t),M(r),M(g),o()}}}function nt(e){let t,n,s,i,o;const r=new $e({}),g=new d({});return{c(){t=m("x-action"),u(r.$$.fragment),n=$(),u(g.$$.fragment),f(t,"class","btn-dark"),f(t,"data-tooltip",s=e[5].actions.unMarkAsSpam)},m(s,c,d){l(s,t,c),p(r,t,null),a(t,n),p(g,t,null),i=!0,d&&o(),o=x(t,"click",e[35])},p(e,n){(!i||32&n[0]&&s!==(s=e[5].actions.unMarkAsSpam))&&f(t,"data-tooltip",s)},i(e){i||(z(r.$$.fragment,e),z(g.$$.fragment,e),i=!0)},o(e){L(r.$$.fragment,e),L(g.$$.fragment,e),i=!1},d(e){e&&c(t),M(r),M(g),o()}}}function st(e){let t,n,s,i,o,r,g,h,v,b,k,H,A,V,C;const D=new d({}),j=[Xe,We,Qe],S=[];function Z(e,t){return 0===e[13].length?0:e[13].length===e[14].length?1:2}i=Z(e),o=S[i]=j[i](e);const _=new Fe({}),T=new d({});let F=0!==e[13].length&&qe(e);return{c(){t=m("x-action-group"),n=m("x-action"),u(D.$$.fragment),s=$(),o.c(),g=$(),h=m("x-action"),v=m("div"),u(_.$$.fragment),b=$(),u(T.$$.fragment),H=$(),F&&F.c(),A=R(),f(n,"class","btn-dark"),f(n,"data-tooltip",r=e[5].actions.select),ee(v,"display","flex"),ee(v,"transition","transform 300ms ease"),ee(v,"transform","rotate("+360*e[10]+"deg)"),f(h,"class","btn-dark reload"),f(h,"data-tooltip",k=e[5].actions.reload),f(t,"class","select svelte-1r6iio1")},m(o,r,c){l(o,t,r),a(t,n),p(D,n,null),a(n,s),S[i].m(n,null),a(t,g),a(t,h),a(h,v),p(_,v,null),a(h,b),p(T,h,null),l(o,H,r),F&&F.m(o,r),l(o,A,r),V=!0,c&&w(C),C=[x(n,"click",e[19]),x(h,"click",e[24])]},p(e,t){let s=i;i=Z(e),i!==s&&(B(),L(S[s],1,1,()=>{S[s]=null}),y(),o=S[i],o||(o=S[i]=j[i](e),o.c()),z(o,1),o.m(n,null)),(!V||32&t[0]&&r!==(r=e[5].actions.select))&&f(n,"data-tooltip",r),(!V||1024&t[0])&&ee(v,"transform","rotate("+360*e[10]+"deg)"),(!V||32&t[0]&&k!==(k=e[5].actions.reload))&&f(h,"data-tooltip",k),0!==e[13].length?F?(F.p(e,t),8192&t[0]&&z(F,1)):(F=qe(e),F.c(),z(F,1),F.m(A.parentNode,A)):F&&(B(),L(F,1,1,()=>{F=null}),y())},i(e){V||(z(D.$$.fragment,e),z(o),z(_.$$.fragment,e),z(T.$$.fragment,e),z(F),V=!0)},o(e){L(D.$$.fragment,e),L(o),L(_.$$.fragment,e),L(T.$$.fragment,e),L(F),V=!1},d(e){e&&c(t),M(D),S[i].d(),M(_),M(T),e&&c(H),F&&F.d(e),e&&c(A),w(C)}}}function it(e){let t,n=!e[11]&&ot();return{c(){n&&n.c(),t=R()},m(e,s){n&&n.m(e,s),l(e,t,s)},p(e,s){e[11]?n&&(n.d(1),n=null):n||(n=ot(),n.c(),n.m(t.parentNode,t))},d(e){n&&n.d(e),e&&c(t)}}}function ot(e){let t;return{c(){t=m("x-mailbox-empty"),t.innerHTML='<span class="label svelte-1r6iio1">No hay mensajes en esta carpeta</span>',f(t,"class","svelte-1r6iio1")},m(e,n){l(e,t,n)},d(e){e&&c(t)}}}function lt(e,t){let n,s,i,o;const a=new Ze({props:{message:t[39],mailbox:t[0]}});return{key:e,first:null,c(){n=m("x-mailbox-message"),u(a.$$.fragment),f(n,"class","svelte-1r6iio1"),this.first=n},m(e,t){l(e,n,t),p(a,n,null),o=!0},p(e,t){const n={};16384&t[0]&&(n.message=e[39]),1&t[0]&&(n.mailbox=e[0]),a.$set(n)},i(e){o||(z(a.$$.fragment,e),e&&Y(()=>{i&&i.end(1),s||(s=I(n,t[26],{duration:150})),s.start()}),o=!0)},o(e){L(a.$$.fragment,e),s&&s.invalidate(),e&&(i=P(n,t[27],{})),o=!1},d(e){e&&c(n),M(a),e&&i&&i.end()}}}function at(e){let t,n,s,i;const o=[ct,rt],a=[];function r(e,t){return e[11]?0:e[16]?1:-1}return~(n=r(e))&&(s=a[n]=o[n](e)),{c(){t=m("x-loadmore"),s&&s.c(),f(t,"class","svelte-1r6iio1")},m(e,s){l(e,t,s),~n&&a[n].m(t,null),i=!0},p(e,i){let l=n;n=r(e),n===l?~n&&a[n].p(e,i):(s&&(B(),L(a[l],1,1,()=>{a[l]=null}),y()),~n?(s=a[n],s||(s=a[n]=o[n](e),s.c()),z(s,1),s.m(t,null)):s=null)},i(e){i||(z(s),i=!0)},o(e){L(s),i=!1},d(e){e&&c(t),~n&&a[n].d()}}}function rt(e){let t,n,s,i,o;const g=new Je({}),h=new d({});return{c(){t=m("x-loadmore-button"),u(g.$$.fragment),n=$(),u(h.$$.fragment),f(t,"class","btn-dark svelte-1r6iio1")},m(s,r,c){l(s,t,r),p(g,t,null),a(t,n),p(h,t,null),i=!0,c&&o(),o=x(t,"click",e[25])},p:r,i(e){i||(z(g.$$.fragment,e),z(h.$$.fragment,e),e&&(s||Y(()=>{s=I(t,K,{delay:150,duration:150}),s.start()})),i=!0)},o(e){L(g.$$.fragment,e),L(h.$$.fragment,e),i=!1},d(e){e&&c(t),M(g),M(h),o()}}}function ct(e){let t,n,s;const i=new te({props:{size:"0.75em"}});return{c(){t=m("x-loadmore-loading"),u(i.$$.fragment),f(t,"class","svelte-1r6iio1")},m(e,n){l(e,t,n),p(i,t,null),s=!0},p:r,i(e){s||(z(i.$$.fragment,e),e&&(n||Y(()=>{n=I(t,K,{delay:150,duration:150}),n.start()})),s=!0)},o(e){L(i.$$.fragment,e),s=!1},d(e){e&&c(t),M(i)}}}function dt(e){let t,n,s,i,o,r=[],d=new Map;const g=new re({props:{scrolled:0!==e[17],$$slots:{default:[st]},$$scope:{ctx:e}}});let h=e[14];const w=e=>`${e[15].id}-${e[39].get().id}`;for(let t=0;t<h.length;t+=1){let n=Oe(e,h,t),s=w(n);d.set(s,r[t]=lt(s,n))}let v=null;h.length||(v=it(e));let b=(e[11]||e[16])&&at(e);return{c(){u(g.$$.fragment),t=$(),n=m("x-tab-content");for(let e=0;e<r.length;e+=1)r[e].c();v&&v.c(),s=$(),b&&b.c(),f(n,"class","svelte-1r6iio1")},m(c,d,m){p(g,c,d),l(c,t,d),l(c,n,d);for(let e=0;e<r.length;e+=1)r[e].m(n,null);v&&v.m(n,null),a(n,s),b&&b.m(n,null),i=!0,m&&o(),o=x(n,"scroll",e[38])},p(e,t){const i={};if(131072&t[0]&&(i.scrolled=0!==e[17]),288745&t[0]|2048&t[1]&&(i.$$scope={dirty:t,ctx:e}),g.$set(i),18433&t[0]){const i=e[14];B(),r=E(r,t,w,1,e,i,d,n,ne,lt,s,Oe),y(),!i.length&&v?v.p(e,t):i.length?v&&(v.d(1),v=null):(v=it(e),v.c(),v.m(n,s))}e[11]||e[16]?b?(b.p(e,t),67584&t[0]&&z(b,1)):(b=at(e),b.c(),z(b,1),b.m(n,null)):b&&(B(),L(b,1,1,()=>{b=null}),y())},i(e){if(!i){z(g.$$.fragment,e);for(let e=0;e<h.length;e+=1)z(r[e]);z(b),i=!0}},o(e){L(g.$$.fragment,e);for(let e=0;e<r.length;e+=1)L(r[e]);L(b),i=!1},d(e){M(g,e),e&&c(t),e&&c(n);for(let e=0;e<r.length;e+=1)r[e].d();v&&v.d(),b&&b.d(),o()}}}function mt(e){let t,n,s;document.title=t=(e[15].unseen?`(${e[15].unseen}) `:"")+e[12].label;const i=new ae({props:{$$slots:{default:[dt]},$$scope:{ctx:e}}});return{c(){n=$(),u(i.$$.fragment)},m(e,t){l(e,n,t),p(i,e,t),s=!0},p(e,n){(!s||36864&n[0])&&t!==(t=(e[15].unseen?`(${e[15].unseen}) `:"")+e[12].label)&&(document.title=t);const o={};487401&n[0]|2048&n[1]&&(o.$$scope={dirty:n,ctx:e}),i.$set(o)},i(e){s||(z(i.$$.fragment,e),s=!0)},o(e){L(i.$$.fragment,e),s=!1},d(e){e&&c(n),M(i,e)}}}const $t=e=>!e.get().seen;function ut(t,n,s){let i,o,l,a,c,d,m,$=r,u=()=>($(),$=V(k,e=>s(13,i=e)),k),g=r,f=()=>(g(),g=V(L,e=>s(14,o=e)),L),h=r,p=()=>(h(),h=V(B,e=>s(15,l=e)),B),w=r,x=()=>(w(),w=V(y,e=>s(16,a=e)),y),v=r,b=()=>(v(),v=V(_,e=>s(17,d=e)),_);t.$$.on_destroy.push(()=>$()),t.$$.on_destroy.push(()=>g()),t.$$.on_destroy.push(()=>h()),t.$$.on_destroy.push(()=>w()),t.$$.on_destroy.push(()=>v());let{mailbox:B}=n;p();let{messages:L}=n;f();let{next:y}=n;x();let{prev:z}=n,{selection:k}=n;u();let M,C,S,Z,{scroll:_}=n;b(),T("mailbox-selection",k);const Y=()=>{const e=k.get();L.update(t=>t.filter(t=>!e.includes(t))),k.clear(),L.get().length<10&&ee()},I=async e=>{i.length&&(i.forEach(t=>t.update(t=>({...t,seen:e}))),k.invalidate(),await G(l.id,i.map(e=>e.get().id),e))},P=async e=>{J(l.id,i.map(e=>e.get().id),e),Y()},R=async()=>{O(l.id,i.map(e=>e.get().id)),Y()};let E=!1,q=0;let K=!1;const ee=async()=>{if(!a)return;s(11,K=!0);const t=await W(l.id,a);L.update(n=>[...n,...t.messages.map(t=>e(t))]),y.set(t.next),z.set(t.prev),s(11,K=!1)},{locale:te,trans:ne}=H("app");A(t,te,e=>s(32,c=e)),A(t,ne,e=>s(18,m=e));let se,{locale:ie=c}=n;return t.$set=e=>{"mailbox"in e&&p(s(0,B=e.mailbox)),"messages"in e&&f(s(1,L=e.messages)),"next"in e&&x(s(2,y=e.next)),"prev"in e&&s(30,z=e.prev),"selection"in e&&u(s(3,k=e.selection)),"scroll"in e&&b(s(4,_=e.scroll)),"locale"in e&&s(5,ie=e.locale)},t.$$.update=()=>{1&t.$$.dirty[0]&&s(6,M=B===F),1&t.$$.dirty[0]&&s(7,C=B===N),1&t.$$.dirty[0]&&s(8,S=B===D),1&t.$$.dirty[0]&&s(9,Z=B===j),32800&t.$$.dirty[0]&&s(12,se=U(l,ie.mailbox.title))},[B,L,y,k,_,ie,M,C,S,Z,q,K,se,i,o,l,a,d,m,()=>{k.update(e=>i.length!==o.length?o.slice():[])},Y,I,P,R,async()=>{if(E)return;s(10,q++,q),E=!0;const t=await Q(l.id);L.set(t.messages.map(t=>e(t))),z.set(t.prev),y.set(t.next),k.clear(),E=!1},ee,(e,t)=>(e.classList.add("removed"),e.style.zIndex="1",setTimeout(()=>e.classList.remove("removed"),1),setTimeout(()=>e.style.zIndex=null,150),{duration:150}),e=>(e.classList.add("removed"),{duration:150}),te,ne,z,E,c,()=>I(!0),()=>I(!1),()=>P(!1),()=>P(!0),()=>R(),e=>X(_,d=e.target.scrollTop)]}class gt extends t{constructor(e){super(),n(this,e,ut,mt,s,{mailbox:0,messages:1,next:2,prev:30,selection:3,scroll:4,locale:5},[-1,-1])}}function ft(e){let t;const n=new gt({props:{mailbox:e[0],messages:e[1],prev:e[2],next:e[3],selection:e[4],scroll:e[5]}});return{c(){u(n.$$.fragment)},m(e,s){p(n,e,s),t=!0},p(e,[t]){const s={};1&t&&(s.mailbox=e[0]),2&t&&(s.messages=e[1]),4&t&&(s.prev=e[2]),8&t&&(s.next=e[3]),16&t&&(s.selection=e[4]),32&t&&(s.scroll=e[5]),n.$set(s)},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}async function ht(t,{client:n}){if(!oe.get())return this.redirect("#!/login");const s=le(t.params.mailbox);if(null==s)return this.error({code:404,message:"La pÃ¡gina no existe"});{const n=await Q(t.params.mailbox),i=e(n.messages.map(t=>e(t))),o=e(n.next);return{mailbox:s,messages:i,prev:e(n.prev),next:o,selection:((t=[])=>{const n=e(t),s=(...e)=>{const t=n.get().slice();for(const s of e)t.includes(s)||t.push(s),n.set(t)},i=(...e)=>n.update(t=>t.filter(t=>!e.includes(t))),o=e=>n.get().includes(e),l=e(o);return n.subscribe(l.invalidate),{...n,clear:()=>n.set([]),add:s,remove:i,toggle:e=>{o(e)?i(e):s(e)},isSelected:l}})(),scroll:e(0)}}}function pt(e,t,n){let{mailbox:s}=t,{messages:i}=t,{prev:o}=t,{next:l}=t,{selection:a}=t,{scroll:r}=t;return e.$set=e=>{"mailbox"in e&&n(0,s=e.mailbox),"messages"in e&&n(1,i=e.messages),"prev"in e&&n(2,o=e.prev),"next"in e&&n(3,l=e.next),"selection"in e&&n(4,a=e.selection),"scroll"in e&&n(5,r=e.scroll)},[s,i,o,l,a,r]}export default class extends t{constructor(e){super(),n(this,e,pt,ft,s,{mailbox:0,messages:1,prev:2,next:3,selection:4,scroll:5})}}export{ht as preload};
//# sourceMappingURL=Mailbox-d9ecb7a8.js.map
