import{S as t,a as e,s as n,b as a,c as s,d as o,e as l,n as c,f as i,at as r,K as m,k as $,E as d,L as f,F as u,ao as g,h as p,j as h,l as x,m as w,M as b,o as v,p as k,w as y,A as B,y as L,B as H,O as V,G as A,H as z,aq as M,au as j,a3 as T,x as S,z as _,ar as C,as as O,Z as R,_ as U,Q as D,R as Z,a6 as I,a7 as N,av as P,W as q,J as E,aw as F,ag as G,r as J,a5 as K,ax as Q,ay as W,ah as X,u as Y,ai as tt,az as et}from"./main-4a061dee.js";import{T as nt,a as at,M as st,c as ot,b as lt,U as ct}from"./MoveTo-c485c82f.js";function it(t){let e,n;return{c(){e=a("svg"),n=a("path"),s(n,"d","M13 17H17V14L22 18.5L17 23V20H13V17M20 4H4A2 2 0 0 0 2 6V18A2 2 0 0 0 4 20H11V18H4V8L12 13L20 8V14H22V6A2 2 0 0 0 20 4M12 11L4 6H20Z"),s(n,"fill",t[2]),s(e,"width",t[0]),s(e,"height",t[1]),s(e,"viewBox",t[3])},m(t,a){o(t,e,a),l(e,n)},p(t,[a]){4&a&&s(n,"fill",t[2]),1&a&&s(e,"width",t[0]),2&a&&s(e,"height",t[1]),8&a&&s(e,"viewBox",t[3])},i:c,o:c,d(t){t&&i(e)}}}function rt(t,e,n){let{size:a="1em"}=e,{width:s=a}=e,{height:o=a}=e,{color:l="currentColor"}=e,{viewBox:c="0 0 24 24"}=e;return t.$set=t=>{"size"in t&&n(4,a=t.size),"width"in t&&n(0,s=t.width),"height"in t&&n(1,o=t.height),"color"in t&&n(2,l=t.color),"viewBox"in t&&n(3,c=t.viewBox)},[s,o,l,c,a]}class mt extends t{constructor(t){super(),e(this,t,rt,it,n,{size:4,width:0,height:1,color:2,viewBox:3})}}function $t(t){let e,n;return{c(){e=a("svg"),n=a("path"),s(n,"d","M22 20H18V23L13 18.5L18 14V17H22V20M20 4H4A2 2 0 0 0 2 6V18A2 2 0 0 0 4 20H11V18H4V8L12 13L20 8V15H22V6A2 2 0 0 0 20 4M12 11L4 6H20Z"),s(n,"fill",t[2]),s(e,"width",t[0]),s(e,"height",t[1]),s(e,"viewBox",t[3])},m(t,a){o(t,e,a),l(e,n)},p(t,[a]){4&a&&s(n,"fill",t[2]),1&a&&s(e,"width",t[0]),2&a&&s(e,"height",t[1]),8&a&&s(e,"viewBox",t[3])},i:c,o:c,d(t){t&&i(e)}}}function dt(t,e,n){let{size:a="1em"}=e,{width:s=a}=e,{height:o=a}=e,{color:l="currentColor"}=e,{viewBox:c="0 0 24 24"}=e;return t.$set=t=>{"size"in t&&n(4,a=t.size),"width"in t&&n(0,s=t.width),"height"in t&&n(1,o=t.height),"color"in t&&n(2,l=t.color),"viewBox"in t&&n(3,c=t.viewBox)},[s,o,l,c,a]}class ft extends t{constructor(t){super(),e(this,t,dt,$t,n,{size:4,width:0,height:1,color:2,viewBox:3})}}function ut(t){let e,n;return{c(){e=a("svg"),n=a("path"),s(n,"d","M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"),s(n,"fill",t[2]),s(e,"width",t[0]),s(e,"height",t[1]),s(e,"viewBox",t[3])},m(t,a){o(t,e,a),l(e,n)},p(t,[a]){4&a&&s(n,"fill",t[2]),1&a&&s(e,"width",t[0]),2&a&&s(e,"height",t[1]),8&a&&s(e,"viewBox",t[3])},i:c,o:c,d(t){t&&i(e)}}}function gt(t,e,n){let{size:a="1em"}=e,{width:s=a}=e,{height:o=a}=e,{color:l="currentColor"}=e,{viewBox:c="0 0 24 24"}=e;return t.$set=t=>{"size"in t&&n(4,a=t.size),"width"in t&&n(0,s=t.width),"height"in t&&n(1,o=t.height),"color"in t&&n(2,l=t.color),"viewBox"in t&&n(3,c=t.viewBox)},[s,o,l,c,a]}class pt extends t{constructor(t){super(),e(this,t,gt,ut,n,{size:4,width:0,height:1,color:2,viewBox:3})}}function ht(t,e,n){const a=t.slice();return a[11]=e[n],a}function xt(t){let e,n,a=t[3].length+"";return{c(){e=$("x-count"),n=d(a),f(e,"class","svelte-coi85r")},m(t,a){o(t,e,a),l(e,n)},p(t,e){8&e&&a!==(a=t[3].length+"")&&u(n,a)},d(t){t&&i(e)}}}function wt(t){let e,n=t[11].filename+"";return{c(){e=d(n)},m(t,n){o(t,e,n)},p(t,a){8&a&&n!==(n=t[11].filename+"")&&u(e,n)},d(t){t&&i(e)}}}function bt(t){let e,n,a,c,r,m;const d=new O({props:{href:"/download/"+t[5].id+"/"+t[6].id+"/"+t[11].id+"?filename="+encodeURIComponent(t[11].filename),target:"_blank",$$slots:{default:[wt]},$$scope:{ctx:t}}});return{c(){e=$("div"),x(d.$$.fragment),n=w(),a=$("img"),r=w(),a.src!==(c=j(t[11].filename))&&s(a,"src",c),s(a,"alt",""),s(a,"class","svelte-coi85r"),s(e,"class","item svelte-coi85r")},m(t,s){o(t,e,s),v(d,e,null),l(e,n),l(e,a),l(e,r),m=!0},p(t,e){const n={};104&e&&(n.href="/download/"+t[5].id+"/"+t[6].id+"/"+t[11].id+"?filename="+encodeURIComponent(t[11].filename)),16392&e&&(n.$$scope={dirty:e,ctx:t}),d.$set(n),(!m||8&e&&a.src!==(c=j(t[11].filename)))&&s(a,"src",c)},i(t){m||(B(d.$$.fragment,t),m=!0)},o(t){L(d.$$.fragment,t),m=!1},d(t){t&&i(e),H(d)}}}function vt(t){let e,n,a=t[3],s=[];for(let e=0;e<a.length;e+=1)s[e]=bt(ht(t,a,e));const l=t=>L(s[t],1,1,()=>{s[t]=null});return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=T()},m(t,a){for(let e=0;e<s.length;e+=1)s[e].m(t,a);o(t,e,a),n=!0},p(t,n){if(104&n){let o;for(a=t[3],o=0;o<a.length;o+=1){const l=ht(t,a,o);s[o]?(s[o].p(l,n),B(s[o],1)):(s[o]=bt(l),s[o].c(),B(s[o],1),s[o].m(e.parentNode,e))}for(S(),o=a.length;o<s.length;o+=1)l(o);_()}},i(t){if(!n){for(let t=0;t<a.length;t+=1)B(s[t]);n=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)L(s[t]);n=!1},d(t){C(s,t),t&&i(e)}}}function kt(t){let e;const n=new M({props:{$$slots:{default:[vt]},$$scope:{ctx:t}}});return{c(){x(n.$$.fragment)},m(t,a){v(n,t,a),e=!0},p(t,e){const a={};16488&e&&(a.$$scope={dirty:e,ctx:t}),n.$set(a)},i(t){e||(B(n.$$.fragment,t),e=!0)},o(t){L(n.$$.fragment,t),e=!1},d(t){H(n,t)}}}function yt(t){let e,n,a,c,d,u,V,A,z;const M=new r({}),j=new m({});let T=t[3].length&&xt(t);function S(e){t[10].call(null,e)}let _={anchor:"top-left",$$slots:{default:[kt]},$$scope:{ctx:t}};void 0!==t[0]&&(_.open=t[0]);const C=new g({props:_});return p.push(()=>h(C,"open",S)),{c(){e=$("x-action"),x(M.$$.fragment),n=w(),x(j.$$.fragment),a=w(),T&&T.c(),c=w(),d=$("div"),x(C.$$.fragment),s(d,"class","anchor svelte-coi85r"),f(e,"class","btn-dark"),f(e,"data-tooltip",V=t[4].actions.attachments),b(e,"hover",t[0])},m(s,i,r){o(s,e,i),v(M,e,null),l(e,n),v(j,e,null),l(e,a),T&&T.m(e,null),l(e,c),l(e,d),v(C,d,null),A=!0,r&&z(),z=k(e,"click",t[8])},p(t,[n]){t[3].length?T?T.p(t,n):(T=xt(t),T.c(),T.m(e,c)):T&&(T.d(1),T=null);const a={};16488&n&&(a.$$scope={dirty:n,ctx:t}),!u&&1&n&&(u=!0,a.open=t[0],y(()=>u=!1)),C.$set(a),(!A||16&n&&V!==(V=t[4].actions.attachments))&&f(e,"data-tooltip",V),1&n&&b(e,"hover",t[0])},i(t){A||(B(M.$$.fragment,t),B(j.$$.fragment,t),B(C.$$.fragment,t),A=!0)},o(t){L(M.$$.fragment,t),L(j.$$.fragment,t),L(C.$$.fragment,t),A=!1},d(t){t&&i(e),H(M),H(j),T&&T.d(),H(C),z()}}}function Bt(t,e,n){let a,s,o,l=c,i=()=>(l(),l=V($,t=>n(5,s=t)),$),r=c,m=()=>(r(),r=V(d,t=>n(6,o=t)),d);t.$$.on_destroy.push(()=>l()),t.$$.on_destroy.push(()=>r());let{mailbox:$}=e;i();let{message:d}=e;m();let{attachments:f}=e;const{locale:u}=A("app");z(t,u,t=>n(9,a=t));let{locale:g=a}=e,{menuOpen:p=!1}=e;return t.$set=t=>{"mailbox"in t&&i(n(1,$=t.mailbox)),"message"in t&&m(n(2,d=t.message)),"attachments"in t&&n(3,f=t.attachments),"locale"in t&&n(4,g=t.locale),"menuOpen"in t&&n(0,p=t.menuOpen)},[p,$,d,f,g,s,o,u,()=>n(0,p=!p),a,function(t){p=t,n(0,p)}]}class Lt extends t{constructor(t){super(),e(this,t,Bt,yt,n,{mailbox:1,message:2,attachments:3,locale:4,menuOpen:0})}}function Ht(t){let e;const n=new ot({});return{c(){x(n.$$.fragment)},m(t,a){v(n,t,a),e=!0},i(t){e||(B(n.$$.fragment,t),e=!0)},o(t){L(n.$$.fragment,t),e=!1},d(t){H(n,t)}}}function Vt(t){let e;const n=new lt({});return{c(){x(n.$$.fragment)},m(t,a){v(n,t,a),e=!0},i(t){e||(B(n.$$.fragment,t),e=!0)},o(t){L(n.$$.fragment,t),e=!1},d(t){H(n,t)}}}function At(t){let e,n,a,s,c;const r=new X({}),d=new m({});return{c(){e=$("x-action"),x(r.$$.fragment),n=w(),x(d.$$.fragment),f(e,"class","btn-dark"),f(e,"data-tooltip",a=t[3].actions.markAsSpam)},m(a,i,m){o(a,e,i),v(r,e,null),l(e,n),v(d,e,null),s=!0,m&&c(),c=k(e,"click",t[13])},p(t,n){(!s||8&n&&a!==(a=t[3].actions.markAsSpam))&&f(e,"data-tooltip",a)},i(t){s||(B(r.$$.fragment,t),B(d.$$.fragment,t),s=!0)},o(t){L(r.$$.fragment,t),L(d.$$.fragment,t),s=!1},d(t){t&&i(e),H(r),H(d),c()}}}function zt(t){let e,n,a,s,c;const r=new ct({}),d=new m({});return{c(){e=$("x-action"),x(r.$$.fragment),n=w(),x(d.$$.fragment),f(e,"class","btn-dark"),f(e,"data-tooltip",a=t[3].actions.unMarkAsSpam)},m(a,i,m){o(a,e,i),v(r,e,null),l(e,n),v(d,e,null),s=!0,m&&c(),c=k(e,"click",t[13])},p(t,n){(!s||8&n&&a!==(a=t[3].actions.unMarkAsSpam))&&f(e,"data-tooltip",a)},i(t){s||(B(r.$$.fragment,t),B(d.$$.fragment,t),s=!0)},o(t){L(r.$$.fragment,t),L(d.$$.fragment,t),s=!1},d(t){t&&i(e),H(r),H(d),c()}}}function Mt(t){let e,n;const a=new Lt({props:{mailbox:t[0],message:t[1],attachments:t[5].attachments,tooltip:t[3].actions.attachments}});return{c(){e=$("x-action-group"),x(a.$$.fragment)},m(t,s){o(t,e,s),v(a,e,null),n=!0},p(t,e){const n={};1&e&&(n.mailbox=t[0]),2&e&&(n.message=t[1]),32&e&&(n.attachments=t[5].attachments),8&e&&(n.tooltip=t[3].actions.attachments),a.$set(n)},i(t){n||(B(a.$$.fragment,t),n=!0)},o(t){L(a.$$.fragment,t),n=!1},d(t){t&&i(e),H(a)}}}function jt(t){let e,n,a,c,r,d,u,g,p,h,b,y,V,A,z,M,j,C,O,R,U,D,Z,I,N,P,q,F,K,Q,W;const X=new pt({}),Y=new m({}),tt=new m({}),et=[Vt,Ht],nt=[];function at(t,e){return t[5].seen?0:1}h=at(t),b=nt[h]=et[h](t);const ot=[zt,At],lt=[];~(A=function(t,e){return t[8]?0:t[10]||t[11]||t[9]?-1:1}(t))&&(z=lt[A]=ot[A](t));const ct=new G({}),it=new m({}),rt=new mt({}),$t=new m({});let dt=!t[10]&&!t[11]&&function(t){let e,n,a,s,c;const r=new ft({}),d=new m({});return{c(){e=$("x-action"),x(r.$$.fragment),n=w(),x(d.$$.fragment),f(e,"class","btn-dark"),f(e,"data-tooltip",a=t[3].actions.reply)},m(a,i,m){o(a,e,i),v(r,e,null),l(e,n),v(d,e,null),s=!0,m&&c(),c=k(e,"click",t[15])},p(t,n){(!s||8&n&&a!==(a=t[3].actions.reply))&&f(e,"data-tooltip",a)},i(t){s||(B(r.$$.fragment,t),B(d.$$.fragment,t),s=!0)},o(t){L(r.$$.fragment,t),L(d.$$.fragment,t),s=!1},d(t){t&&i(e),H(r),H(d),c()}}}(t);const ut=new st({props:{mailbox:t[0],selection:E([t[1]]),tooltip:t[3].actions.moveTo}});ut.$on("moved",t[17]);let gt=t[5].attachments&&t[5].attachments.length&&Mt(t);return{c(){e=$("x-action-group"),n=$("a"),x(X.$$.fragment),a=w(),x(Y.$$.fragment),d=w(),u=$("x-action-group"),g=$("x-action"),x(tt.$$.fragment),p=w(),b.c(),V=w(),z&&z.c(),M=w(),j=$("x-action"),x(ct.$$.fragment),C=w(),x(it.$$.fragment),R=w(),U=$("x-action-group"),D=$("x-action"),x(rt.$$.fragment),Z=w(),x($t.$$.fragment),N=w(),dt&&dt.c(),P=w(),q=$("x-action-group"),x(ut.$$.fragment),F=w(),gt&&gt.c(),K=T(),s(n,"class","x-action btn-dark"),s(n,"href",c="#!/mailbox/"+t[4].id),s(n,"data-tooltip",r=t[3].actions.backToMailbox),f(g,"class","btn-dark"),f(g,"data-tooltip",y=t[5].seen?t[3].actions.markAsUnread:t[3].actions.markAsRead),f(j,"class","btn-dark"),f(j,"data-tooltip",O=t[9]?t[3].actions.deletePermanently:t[10]?t[3].actions.discardDrafts:t[3].actions.delete),f(D,"class","btn-dark"),f(D,"data-tooltip",I=t[3].actions.forward)},m(s,c,i){o(s,e,c),l(e,n),v(X,n,null),l(n,a),v(Y,n,null),o(s,d,c),o(s,u,c),l(u,g),v(tt,g,null),l(g,p),nt[h].m(g,null),l(u,V),~A&&lt[A].m(u,null),l(u,M),l(u,j),v(ct,j,null),l(j,C),v(it,j,null),o(s,R,c),o(s,U,c),l(U,D),v(rt,D,null),l(D,Z),v($t,D,null),l(U,N),dt&&dt.m(U,null),o(s,P,c),o(s,q,c),v(ut,q,null),o(s,F,c),gt&&gt.m(s,c),o(s,K,c),Q=!0,i&&J(W),W=[k(g,"click",t[12]),k(j,"click",t[14]),k(D,"click",t[16])]},p(t,e){(!Q||16&e&&c!==(c="#!/mailbox/"+t[4].id))&&s(n,"href",c),(!Q||8&e&&r!==(r=t[3].actions.backToMailbox))&&s(n,"data-tooltip",r);let a=h;h=at(t),h!==a&&(S(),L(nt[a],1,1,()=>{nt[a]=null}),_(),b=nt[h],b||(b=nt[h]=et[h](t),b.c()),B(b,1),b.m(g,null)),(!Q||40&e&&y!==(y=t[5].seen?t[3].actions.markAsUnread:t[3].actions.markAsRead))&&f(g,"data-tooltip",y),z&&z.p(t,e),(!Q||8&e&&O!==(O=t[9]?t[3].actions.deletePermanently:t[10]?t[3].actions.discardDrafts:t[3].actions.delete))&&f(j,"data-tooltip",O),(!Q||8&e&&I!==(I=t[3].actions.forward))&&f(D,"data-tooltip",I),t[10]||t[11]||dt.p(t,e);const o={};1&e&&(o.mailbox=t[0]),2&e&&(o.selection=E([t[1]])),8&e&&(o.tooltip=t[3].actions.moveTo),ut.$set(o),t[5].attachments&&t[5].attachments.length?gt?(gt.p(t,e),32&e&&B(gt,1)):(gt=Mt(t),gt.c(),B(gt,1),gt.m(K.parentNode,K)):gt&&(S(),L(gt,1,1,()=>{gt=null}),_())},i(t){Q||(B(X.$$.fragment,t),B(Y.$$.fragment,t),B(tt.$$.fragment,t),B(b),B(z),B(ct.$$.fragment,t),B(it.$$.fragment,t),B(rt.$$.fragment,t),B($t.$$.fragment,t),B(dt),B(ut.$$.fragment,t),B(gt),Q=!0)},o(t){L(X.$$.fragment,t),L(Y.$$.fragment,t),L(tt.$$.fragment,t),L(b),L(z),L(ct.$$.fragment,t),L(it.$$.fragment,t),L(rt.$$.fragment,t),L($t.$$.fragment,t),L(dt),L(ut.$$.fragment,t),L(gt),Q=!1},d(t){t&&i(e),H(X),H(Y),t&&i(d),t&&i(u),H(tt),nt[h].d(),~A&&lt[A].d(),H(ct),H(it),t&&i(R),t&&i(U),H(rt),H($t),dt&&dt.d(),t&&i(P),t&&i(q),H(ut),t&&i(F),gt&&gt.d(t),t&&i(K),J(W)}}}function Tt(t){let e;function n(t,e){return t[5].from.name?_t:St}let a=n(t),s=a(t);return{c(){e=$("x-message-from"),s.c(),f(e,"class","svelte-hdndkc")},m(t,n){o(t,e,n),s.m(e,null)},p(t,o){a===(a=n(t))&&s?s.p(t,o):(s.d(1),s=a(t),s&&(s.c(),s.m(e,null)))},d(t){t&&i(e),s.d()}}}function St(t){let e,n,a,c,r=t[3].message.labels.from+"",m=t[5].from.address+"";return{c(){e=d(r),n=w(),a=$("span"),c=d(m),s(a,"class","from-main svelte-hdndkc")},m(t,s){o(t,e,s),o(t,n,s),o(t,a,s),l(a,c)},p(t,n){8&n&&r!==(r=t[3].message.labels.from+"")&&u(e,r),32&n&&m!==(m=t[5].from.address+"")&&u(c,m)},d(t){t&&i(e),t&&i(n),t&&i(a)}}}function _t(t){let e,n,a,c,r,m,f,g,p=t[3].message.labels.from+"",h=t[5].from.name+"",x=t[5].from.address+"";return{c(){e=d(p),n=w(),a=$("span"),c=d(h),r=w(),m=d("<"),f=d(x),g=d(">"),s(a,"class","from-main svelte-hdndkc")},m(t,s){o(t,e,s),o(t,n,s),o(t,a,s),l(a,c),o(t,r,s),o(t,m,s),o(t,f,s),o(t,g,s)},p(t,n){8&n&&p!==(p=t[3].message.labels.from+"")&&u(e,p),32&n&&h!==(h=t[5].from.name+"")&&u(c,h),32&n&&x!==(x=t[5].from.address+"")&&u(f,x)},d(t){t&&i(e),t&&i(n),t&&i(a),t&&i(r),t&&i(m),t&&i(f),t&&i(g)}}}function Ct(t){let e,n,a,s,c=t[3].message.labels.to+"",r=t[5].to.map(It).join(", ")+"";return{c(){e=$("x-message-to"),n=d(c),a=w(),s=d(r),f(e,"class","svelte-hdndkc")},m(t,c){o(t,e,c),l(e,n),l(e,a),l(e,s)},p(t,e){8&e&&c!==(c=t[3].message.labels.to+"")&&u(n,c),32&e&&r!==(r=t[5].to.map(It).join(", ")+"")&&u(s,r)},d(t){t&&i(e)}}}function Ot(t){let e,n,a,s,c=t[3].message.labels.date+"",r=new Date(t[5].date).toLocaleString()+"";return{c(){e=$("x-message-date"),n=d(c),a=w(),s=d(r),f(e,"class","svelte-hdndkc")},m(t,c){o(t,e,c),l(e,n),l(e,a),l(e,s)},p(t,e){8&e&&c!==(c=t[3].message.labels.date+"")&&u(n,c),32&e&&r!==(r=new Date(t[5].date).toLocaleString()+"")&&u(s,r)},d(t){t&&i(e)}}}function Rt(t){let e,n,a=t[5].text+"";return{c(){e=$("pre"),n=d(a)},m(t,a){o(t,e,a),l(e,n)},p(t,e){32&e&&a!==(a=t[5].text+"")&&u(n,a)},d(t){t&&i(e)}}}function Ut(t){let e,n=Q(t[5].html.join(""))+"";return{c(){e=new W(n,null)},m(t,n){e.m(t,n)},p(t,a){32&a&&n!==(n=Q(t[5].html.join(""))+"")&&e.p(n)},d(t){t&&e.d()}}}function Dt(t){let e,n,a,s,c,r,m,g,p,h,b,y,V,A=t[5].subject+"";const z=new at({props:{scrolled:0!==t[6],$$slots:{default:[jt]},$$scope:{ctx:t}}});let M=t[5].from&&Tt(t),j=t[5].to&&Ct(t),T=t[5].date&&Ot(t);function S(t,e){return t[5].html&&t[5].html.length?Ut:((null==b||32&e)&&(b=!(!t[5].text||!t[5].text.trim())),b?Rt:void 0)}let _=S(t,-1),C=_&&_(t);return{c(){x(z.$$.fragment),e=w(),n=$("x-tab-content"),a=$("x-message-title"),s=d(A),c=w(),r=$("x-message-info"),M&&M.c(),m=w(),j&&j.c(),g=w(),T&&T.c(),p=w(),h=$("x-message-content"),C&&C.c(),f(a,"class","svelte-hdndkc"),f(r,"class","svelte-hdndkc"),f(h,"class","svelte-hdndkc"),f(n,"class","svelte-hdndkc")},m(i,$,d){v(z,i,$),o(i,e,$),o(i,n,$),l(n,a),l(a,s),l(n,c),l(n,r),M&&M.m(r,null),l(r,m),j&&j.m(r,null),l(r,g),T&&T.m(r,null),l(n,p),l(n,h),C&&C.m(h,null),y=!0,d&&V(),V=k(n,"scroll",t[7])},p(t,e){const n={};64&e&&(n.scrolled=0!==t[6]),2097211&e&&(n.$$scope={dirty:e,ctx:t}),z.$set(n),(!y||32&e)&&A!==(A=t[5].subject+"")&&u(s,A),t[5].from?M?M.p(t,e):(M=Tt(t),M.c(),M.m(r,m)):M&&(M.d(1),M=null),t[5].to?j?j.p(t,e):(j=Ct(t),j.c(),j.m(r,g)):j&&(j.d(1),j=null),t[5].date?T?T.p(t,e):(T=Ot(t),T.c(),T.m(r,null)):T&&(T.d(1),T=null),_===(_=S(t,e))&&C?C.p(t,e):(C&&C.d(1),C=_&&_(t),C&&(C.c(),C.m(h,null)))},i(t){y||(B(z.$$.fragment,t),y=!0)},o(t){L(z.$$.fragment,t),y=!1},d(t){H(z,t),t&&i(e),t&&i(n),M&&M.d(),j&&j.d(),T&&T.d(),C&&C.d(),V()}}}function Zt(t){let e,n,a;document.title=e=t[5].subject;const s=new nt({props:{$$slots:{default:[Dt]},$$scope:{ctx:t}}});return{c(){n=w(),x(s.$$.fragment)},m(t,e){o(t,n,e),v(s,t,e),a=!0},p(t,[n]){(!a||32&n)&&e!==(e=t[5].subject)&&(document.title=e);const o={};2097275&n&&(o.$$scope={dirty:n,ctx:t}),s.$set(o)},i(t){a||(B(s.$$.fragment,t),a=!0)},o(t){L(s.$$.fragment,t),a=!1},d(t){t&&i(n),H(s,t)}}}const It=t=>`<${t.address}>`;function Nt(t,e,n){let a,s,o,l,i=c,r=()=>(i(),i=V(u,t=>n(4,a=t)),u),m=c,$=()=>(m(),m=V(g,t=>n(5,s=t)),g),d=c,f=()=>(d(),d=V(p,t=>n(6,l=t)),p);t.$$.on_destroy.push(()=>i()),t.$$.on_destroy.push(()=>m()),t.$$.on_destroy.push(()=>d());let{mailbox:u}=e;r();let{message:g}=e;$();let{scroll:p}=e;f();let h=R===u,x=U===u,w=D===u,b=Z===u;const v=t=>{let e=!1;return async()=>{if(!e){e=!0;try{await t()}catch(t){throw t}finally{e=!1}}}},k=v(async()=>{await K(a.id,[s.id],!s.seen),g.update(t=>({...t,seen:!t.seen}))}),y=v(async()=>{await I(a.id,[s.id],!h),location.hash="#!/mailbox/"+a.id}),B=v(async()=>{await N(a.id,[s.id]),location.hash="#!/mailbox/"+a.id}),L=v(async()=>{const t=await P(a.id,s.id);q(E(t))}),H=v(async()=>{const t=await F(a.id,s.id);q(E(t))}),{locale:M}=A("app");z(t,M,t=>n(19,o=t));let{locale:j=o}=e;return t.$set=t=>{"mailbox"in t&&r(n(0,u=t.mailbox)),"message"in t&&$(n(1,g=t.message)),"scroll"in t&&f(n(2,p=t.scroll)),"locale"in t&&n(3,j=t.locale)},[u,g,p,j,a,s,l,t=>p.set(t.target.scrollTop),h,x,w,b,k,y,B,L,H,()=>setTimeout(()=>location.hash="#!/mailbox/"+a.id,250),M]}class Pt extends t{constructor(t){super(),e(this,t,Nt,Zt,n,{mailbox:0,message:1,scroll:2,locale:3})}}function qt(t){let e;const n=new Pt({props:{mailbox:t[0],message:t[1],scroll:t[2]}});return{c(){x(n.$$.fragment)},m(t,a){v(n,t,a),e=!0},p(t,[e]){const a={};1&e&&(a.mailbox=t[0]),2&e&&(a.message=t[1]),4&e&&(a.scroll=t[2]),n.$set(a)},i(t){e||(B(n.$$.fragment,t),e=!0)},o(t){L(n.$$.fragment,t),e=!1},d(t){H(n,t)}}}async function Et(t){if(!Y.get())return this.redirect("#!/login");const e=await tt(t.params.mailbox);if(null==e)return this.redirect("#!/");try{const n=await et(t.params.mailbox,t.params.message);return{mailbox:e,message:E(n),scroll:E(0)}}catch(t){this.redirect("#!/mailbox/"+e.get().id)}}function Ft(t,e,n){let{mailbox:a}=e,{message:s}=e,{scroll:o}=e;return t.$set=t=>{"mailbox"in t&&n(0,a=t.mailbox),"message"in t&&n(1,s=t.message),"scroll"in t&&n(2,o=t.scroll)},[a,s,o]}export default class extends t{constructor(t){super(),e(this,t,Ft,qt,n,{mailbox:0,message:1,scroll:2})}}export{Et as preload};
//# sourceMappingURL=Message-75f13e11.js.map
